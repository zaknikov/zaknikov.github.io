"use strict";(self["webpackChunkorbital"]=self["webpackChunkorbital"]||[]).push([[8292],{650401:function(e,t,a){a.r(t),a.d(t,{useAppDataStore:function(){return o}});var r=a(461020),s=a(44870),n=a(17639);const o=(0,r.Q_)("appData",(()=>{const e=(0,s.iH)(n.params),t=(0,s.iH)(n.hotspots),a=(0,s.iH)(t.value.default_filters),r=(0,s.iH)(a.value.status),o=(0,s.iH)(t.value.status),u=(0,s.iH)(t.value.surface);return{params:e,hsParams:t,defaultFilters:a,defaultStatus:r,status:o,surfaceMinMax:u}}))},263091:function(e,t,a){a.r(t),a.d(t,{useCaptureStore:function(){return u}});var r=a(461020),s=a(692269),n=a.n(s),o=a(44870);const u=(0,r.Q_)("screenshot",(()=>{const e=(0,o.iH)(""),t=(0,o.iH)(""),a=(0,o.iH)(!1),r=(0,o.iH)(!1),s=(0,o.iH)(!1),u=(0,o.iH)(HTMLElement);function i(e){u.value=e,l()}function l(){a.value=!0,r.value=!1,e.value="",s.value=!0,window.setTimeout((()=>{const s=u.value;n()(s,{allowTaint:!0,useCORS:!1,height:s.offsetHeight,width:s.offsetWidth}).then((function(r){a.value=!1;const s=r.toDataURL("image/jpeg");e.value=s,t.value=s})).catch((()=>{a.value=!1,r.value=!0}))}),500)}return{currentImage:e,captureLink:t,isLoading:a,errorCapture:r,element:u,isOpenModal:s,takeScreen:i,capture:l}}))},748240:function(e,t,a){a.r(t),a.d(t,{useRegionsStore:function(){return p}});var r=a(461020),s=a(849865),n=a(650401),o=a(44870),u=a(373396),i=a(156265),l=a.n(i),c=a(122483);const p=(0,r.Q_)("regions",(()=>{const e=(0,s.useAuthStore)(),t=(0,n.useAppDataStore)(),{params:a,hsParams:i,defaultFilters:p}=(0,r.Jk)(t),h=(0,c.tv)(),d=(0,o.iH)({}),f=(0,o.iH)({}),v=(0,o.iH)(""),g=(0,o.iH)({}),m=(0,o.iH)(""),b=(0,o.iH)(i.value.color_types),y=a.value,H=(0,o.iH)(!1),w=(0,o.iH)(!0),A=(0,u.Fl)((()=>Object.keys(g).length?{Surface:g.value.surface+"m²",Type:g.value.type,Etage:g.value.etage,Terrasse:g.value.terrasse+"m²",Code:g.value.code_ref}:{})),C=(0,u.Fl)((()=>{const e=g.value.appt;return k(e)})),E=(0,u.Fl)((()=>{const e=g.value.bloc;return k(e)})),x=(0,u.Fl)((()=>{const e=g.value.etage;return k(e)})),R=(0,u.Fl)((()=>{if(Object.keys(d.value).length){const e=d.value[v.value];return g.value=e,e}})),_=(0,u.Fl)((()=>{if(Object.keys(b.value).length)return b.value[m.value]}));function k(e){const t=e<=9?"0":"";return t+e}function T(e){v.value=e,g.value=d.value[e],m.value=g.value.type}async function F(){try{const e=await l().request({url:"/get-regions",method:"GET",baseURL:"https://orbital-360.vercel.app/api"});d.value=e.data.data.regions,w.value=!1,H.value=!1}catch(e){H.value=!0;const t=e.response.data;return void 0===t?e.message:t.message||e.response.statusText||e.message}}async function L(){try{const t=e.getToken(),a=await l().request({url:"/list-appt",method:"GET",baseURL:"https://orbital-360.vercel.app/api",headers:{Authorization:`Bearer ${t}`}});d.value=a.data.data.regions,w.value=!1,H.value=!1,e.isAdmin=!0}catch(t){H.value=!0,e.isAdmin=!1,h.push("login")}}async function S(t,a){try{const r=e.getToken(),s=await l().post("https://orbital-360.vercel.app/api/edit-appt",{id:t,status:a},{headers:{"content-type":"application/json",Authorization:`Bearer ${r}`}}),n=s.data;return d.value=n.data.regions,H.value=!1,n.message}catch(r){H.value=!0;const e=r.response.data;return void 0===e?r.message:e.message}}function B(e){f.value=Object.fromEntries(Object.entries(d.value).filter((t=>{const a=t[1],r=a.surface,s=a.type,n=a.etage,o=a.statut;return N(e,r,s,n,o)})))}function N(e,t,a,r,s){return O(e,t)&&e.types.includes(a)&&e.stages.includes(Number(r))&&e.status.includes(s)}function O(e,t){return!e.surface||t>=e.surface.min&&t<=e.surface.max}return{firstFetch:w,regions:d,filteredRegions:f,regionId:v,currentRegion:g,region:R,body__infos:A,appt:C,bloc:E,etage:x,colorTypes:b,defaultFilters:p,orbitalParams:y,currentColor:_,isError:H,fetchRegions:F,fetchAuthRegions:L,editStatus:S,setRegion:T,filterRegions:B}}))},976163:function(e,t,a){a.r(t),a.d(t,{COLOR_HELPER:function(){return l},XmlManager:function(){return i}});a(21703);var r=a(156265),s=a.n(r),n=a(939058),o=a.n(n);class u{constructor(){}getColorString(e){const t=`c(${e.red}, ${e.green}, ${e.blue})`;return t}getColorFill(e,t){const a=`rgba(${e.red}, ${e.green}, ${e.blue} , ${t})`;return a}getUniqColor(e,t=!0){let a=e.size;while(e.size<a+10){let a=this._generateRandHexColor();if(!e.has(a)&&"#000000"!==a){const e=t?a:this._hexToRgb(a);return e}}}hexToRgb(e){let t,a={};if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return t=e.substring(1).split(""),3==t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),a={red:t>>16&255,green:t>>8&255,blue:255&t},a;throw new Error("Bad Hex color given")}_generateRandHexColor(){const e=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"];let t="#";for(var a=0;a<6;a++){let a=this._rand(0,15);t+=e[a]}return t}_rand(e,t){let a=Math.random()*(t-e)+e;return Math.round(a)}}class i{constructor(e){this.fileName=e,this.xmlData,this.isLoaded=!1}getHotspots(){return this.xmlData.vrobject.hotspots[0].polyhotspot}loadXmlData(e){s().get(this.fileName).then((t=>{this._parseXML(t.data).then((t=>{this.xmlData=t,e()}))})).catch((e=>{console.log(e),window.dispatchEvent(new CustomEvent("OnError",{bubbles:!1}))}))}_parseXML(e){return new Promise((t=>{const a=new(o().Parser)({trim:!0,explicitArray:!0,preserveChildrenOrder:!0});a.parseString(e,(function(e,a){t(a)}))}))}}const l=new u},90637:function(e,t,a){a.r(t),a.d(t,{transitionEnter:function(){return s},transitionLeave:function(){return n}});var r=a(658552);function s(e){const t=e.getElementsByClassName("hs-more-carousel")[0],a=e.getElementsByClassName("hs-more-infos")[0],s=e.getElementsByClassName("infos-list"),n=e.getElementsByClassName("row-dispo")[0],o=e.getElementsByClassName("close-detail")[0],u=e.getElementsByClassName("more-footer")[0],i=r.p8.timeline({repeat:0});i.set(e,{overflow:"hidden"}),i.set(t,{autoAlpha:0,scale:.95}),i.set(a,{autoAlpha:0,x:"100%"}),i.set(o,{x:"-100%",autoAlpha:0}),i.set(u,{y:"100%",autoAlpha:0}),i.fromTo(e,{autoAlpha:0},{autoAlpha:1,duration:.3}),i.to(a,{autoAlpha:1,x:"0",duration:.7,ease:"power4.out",onComplete:()=>i.set(e,{overflow:"initial"})}),i.from(s,{autoAlpha:0,y:"40",duration:.5,stagger:.1,ease:"power4.out"},"<+=0.2"),i.from(n,{autoAlpha:0,scale:.4,duration:.4,ease:"back.out(1.7)"},"-=0.2"),i.to(t,{autoAlpha:1,scale:1,duration:.6,ease:"power4.out"},"-=0.6"),i.to(o,{autoAlpha:1,x:0,duration:.6,ease:"back.out(2)"}),i.to(u,{autoAlpha:1,y:0,duration:.5,ease:"back.out(2)"},"<")}function n(e,t){const a=e.getElementsByClassName("hs-more-infos")[0],s=e.getElementsByClassName("hs-more-carousel")[0],n=r.p8.timeline({repeat:0});n.set(e,{overflow:"hidden"}),n.to(s,{autoAlpha:0,duration:.4}),n.to(a,{autoAlpha:0,x:"100%",duration:.4,ease:"power4.in"},"-=0.2"),n.to(e,{autoAlpha:0,duration:.2,delay:.5,onComplete:t},"-=0.5")}}}]);
//# sourceMappingURL=8292.b49cd904.js.map