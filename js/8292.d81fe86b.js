"use strict";(self["webpackChunkorbital"]=self["webpackChunkorbital"]||[]).push([[8292],{650401:function(e,t,a){a.r(t),a.d(t,{useAppDataStore:function(){return s}});var r=a(461020),n=a(44870),o=a(17639);const s=(0,r.Q_)("appData",(()=>{const e=(0,n.iH)(o.params),t=(0,n.iH)(o.hotspots),a=(0,n.iH)(t.value.default_filters),r=(0,n.iH)(a.value.status),s=(0,n.iH)(t.value.status),u=(0,n.iH)(t.value.surface);return{params:e,hsParams:t,defaultFilters:a,defaultStatus:r,status:s,surfaceMinMax:u}}))},263091:function(e,t,a){a.r(t),a.d(t,{useCaptureStore:function(){return u}});var r=a(461020),n=a(692269),o=a.n(n),s=a(44870);const u=(0,r.Q_)("screenshot",(()=>{const e=(0,s.iH)(""),t=(0,s.iH)(""),a=(0,s.iH)(!1),r=(0,s.iH)(!1),n=(0,s.iH)(!1),u=(0,s.iH)(HTMLElement);function l(e){u.value=e,i()}function i(){a.value=!0,r.value=!1,e.value="",n.value=!0,window.setTimeout((()=>{const n=u.value;o()(n,{allowTaint:!0,useCORS:!1,height:n.offsetHeight,width:n.offsetWidth}).then((function(r){a.value=!1;const n=r.toDataURL("image/jpeg");e.value=n,t.value=n})).catch((()=>{a.value=!1,r.value=!0}))}),500)}return{currentImage:e,captureLink:t,isLoading:a,errorCapture:r,element:u,isOpenModal:n,takeScreen:l,capture:i}}))},748240:function(e,t,a){a.r(t),a.d(t,{useRegionsStore:function(){return h}});var r=a(461020),n=a(849865),o=a(650401),s=a(44870),u=a(373396),l=a(156265),i=a.n(l),c=a(122483),p=a(34734);const h=(0,r.Q_)("regions",(()=>{const e=(0,n.useAuthStore)(),t=(0,o.useAppDataStore)(),{params:a,hsParams:l,defaultFilters:h}=(0,r.Jk)(t),f=(0,c.tv)(),d=(0,s.iH)({}),g=(0,s.iH)({}),v=(0,s.iH)(""),m=(0,s.iH)({}),y=(0,s.iH)(""),b=(0,s.iH)(l.value.color_types),H=a.value,w=(0,s.iH)(!1),A=(0,s.iH)(!0),C=(0,u.Fl)((()=>Object.keys(m).length?{Surface:m.value.surface+"m²",Type:m.value.type,Etage:m.value.etage,Terrasse:m.value.terrasse+"m²",Code:m.value.code_ref}:{})),E=(0,u.Fl)((()=>{const e=m.value.appt;return F(e)})),x=(0,u.Fl)((()=>{const e=m.value.bloc;return F(e)})),R=(0,u.Fl)((()=>{const e=m.value.etage;return F(e)})),_=(0,u.Fl)((()=>{if(Object.keys(d.value).length){const e=d.value[v.value];return m.value=e,e}})),k=(0,u.Fl)((()=>{if(Object.keys(b.value).length)return b.value[y.value]}));function F(e){const t=e<=9?"0":"";return t+e}function S(e){v.value=e,m.value=d.value[e],y.value=m.value.type}async function T(){d.value=p}async function B(){try{const t=e.getToken(),a=await i().request({url:"/list-appt",method:"GET",baseURL:"http://localhost:3333/api",headers:{Authorization:`Bearer ${t}`}});d.value=a.data.data.regions,A.value=!1,w.value=!1,e.isAdmin=!0}catch(t){w.value=!0,e.isAdmin=!1,f.push("login")}}async function L(t,a){try{const r=e.getToken(),n=await i().post("http://localhost:3333/api/edit-appt",{id:t,status:a},{headers:{"content-type":"application/json",Authorization:`Bearer ${r}`}}),o=n.data;return d.value=o.data.regions,w.value=!1,o.message}catch(r){w.value=!0;const e=r.response.data;return void 0===e?r.message:e.message}}function N(e){g.value=Object.fromEntries(Object.entries(d.value).filter((t=>{const a=t[1],r=a.surface,n=a.type,o=a.etage,s=a.statut;return O(e,r,n,o,s)})))}function O(e,t,a,r,n){return $(e,t)&&e.types.includes(a)&&e.stages.includes(Number(r))&&e.status.includes(n)}function $(e,t){return!e.surface||t>=e.surface.min&&t<=e.surface.max}return{firstFetch:A,regions:d,filteredRegions:g,regionId:v,currentRegion:m,region:_,body__infos:C,appt:E,bloc:x,etage:R,colorTypes:b,defaultFilters:h,orbitalParams:H,currentColor:k,isError:w,fetchRegions:T,fetchAuthRegions:B,editStatus:L,setRegion:S,filterRegions:N}}))},976163:function(e,t,a){a.r(t),a.d(t,{COLOR_HELPER:function(){return i},XmlManager:function(){return l}});a(21703);var r=a(156265),n=a.n(r),o=a(939058),s=a.n(o);class u{constructor(){}getColorString(e){const t=`c(${e.red}, ${e.green}, ${e.blue})`;return t}getColorFill(e,t){const a=`rgba(${e.red}, ${e.green}, ${e.blue} , ${t})`;return a}getUniqColor(e,t=!0){let a=e.size;while(e.size<a+10){let a=this._generateRandHexColor();if(!e.has(a)&&"#000000"!==a){const e=t?a:this._hexToRgb(a);return e}}}hexToRgb(e){let t,a={};if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return t=e.substring(1).split(""),3==t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),a={red:t>>16&255,green:t>>8&255,blue:255&t},a;throw new Error("Bad Hex color given")}_generateRandHexColor(){const e=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"];let t="#";for(var a=0;a<6;a++){let a=this._rand(0,15);t+=e[a]}return t}_rand(e,t){let a=Math.random()*(t-e)+e;return Math.round(a)}}class l{constructor(e){this.fileName=e,this.xmlData,this.isLoaded=!1}getHotspots(){return this.xmlData.vrobject.hotspots[0].polyhotspot}loadXmlData(e){n().get(this.fileName).then((t=>{this._parseXML(t.data).then((t=>{this.xmlData=t,e()}))})).catch((e=>{console.log(e),window.dispatchEvent(new CustomEvent("OnError",{bubbles:!1}))}))}_parseXML(e){return new Promise((t=>{const a=new(s().Parser)({trim:!0,explicitArray:!0,preserveChildrenOrder:!0});a.parseString(e,(function(e,a){t(a)}))}))}}const i=new u},90637:function(e,t,a){a.r(t),a.d(t,{transitionEnter:function(){return n},transitionLeave:function(){return o}});var r=a(658552);function n(e){const t=e.getElementsByClassName("hs-more-carousel")[0],a=e.getElementsByClassName("hs-more-infos")[0],n=e.getElementsByClassName("infos-list"),o=e.getElementsByClassName("row-dispo")[0],s=e.getElementsByClassName("close-detail")[0],u=e.getElementsByClassName("more-footer")[0],l=r.p8.timeline({repeat:0});l.set(e,{overflow:"hidden"}),l.set(t,{autoAlpha:0,scale:.95}),l.set(a,{autoAlpha:0,x:"100%"}),l.set(s,{x:"-100%",autoAlpha:0}),l.set(u,{y:"100%",autoAlpha:0}),l.fromTo(e,{autoAlpha:0},{autoAlpha:1,duration:.3}),l.to(a,{autoAlpha:1,x:"0",duration:.7,ease:"power4.out",onComplete:()=>l.set(e,{overflow:"initial"})}),l.from(n,{autoAlpha:0,y:"40",duration:.5,stagger:.1,ease:"power4.out"},"<+=0.2"),l.from(o,{autoAlpha:0,scale:.4,duration:.4,ease:"back.out(1.7)"},"-=0.2"),l.to(t,{autoAlpha:1,scale:1,duration:.6,ease:"power4.out"},"-=0.6"),l.to(s,{autoAlpha:1,x:0,duration:.6,ease:"back.out(2)"}),l.to(u,{autoAlpha:1,y:0,duration:.5,ease:"back.out(2)"},"<")}function o(e,t){const a=e.getElementsByClassName("hs-more-infos")[0],n=e.getElementsByClassName("hs-more-carousel")[0],o=r.p8.timeline({repeat:0});o.set(e,{overflow:"hidden"}),o.to(n,{autoAlpha:0,duration:.4}),o.to(a,{autoAlpha:0,x:"100%",duration:.4,ease:"power4.in"},"-=0.2"),o.to(e,{autoAlpha:0,duration:.2,delay:.5,onComplete:t},"-=0.5")}}}]);
//# sourceMappingURL=8292.d81fe86b.js.map