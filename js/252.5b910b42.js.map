{"version":3,"file":"js/252.5b910b42.js","mappings":"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","sources":["webpack://orbital/./src/canvas-modules/animation.js","webpack://orbital/./src/canvas-modules/animator.js","webpack://orbital/./src/canvas-modules/canvasBuilder.js","webpack://orbital/./src/canvas-modules/controls/drag.js","webpack://orbital/./src/canvas-modules/controls/input_system.js","webpack://orbital/./src/canvas-modules/controls/zoom.js","webpack://orbital/./src/canvas-modules/hotspots.js","webpack://orbital/./src/canvas-modules/orbital.js","webpack://orbital/./src/canvas-modules/resizer.js","webpack://orbital/./src/canvas-modules/tilesController.js","webpack://orbital/./src/components/admin/EditAppt.vue","webpack://orbital/./src/components/admin/EditAppt.vue?9dbc","webpack://orbital/./src/components/app-ui/AlertComponent.vue","webpack://orbital/./src/components/app-ui/AlertComponent.vue?a2d7","webpack://orbital/./src/components/app-ui/CaptureModal.vue","webpack://orbital/./src/components/app-ui/CaptureModal.vue?67d9","webpack://orbital/./src/components/app-ui/CarouselComponent.vue","webpack://orbital/./src/components/app-ui/CarouselComponent.vue?0d5d","webpack://orbital/./src/components/app-ui/ImageComponent.vue","webpack://orbital/./src/components/app-ui/ImageComponent.vue?0a5b","webpack://orbital/./src/components/orbital/CompassComponent.vue","webpack://orbital/./src/components/orbital/CompassComponent.vue?d203","webpack://orbital/./src/components/orbital/FilterComponent.vue","webpack://orbital/./src/components/orbital/FilterComponent.vue?535f","webpack://orbital/./src/components/orbital/HotspotDetails.vue","webpack://orbital/./src/components/orbital/HotspotDetails.vue?bb4a","webpack://orbital/./src/components/orbital/LoaderComponent.vue","webpack://orbital/./src/components/orbital/OrbitalComponent.vue","webpack://orbital/./src/components/orbital/OrbitalComponent.vue?fabf","webpack://orbital/./src/components/orbital/OrbitalMenu.vue","webpack://orbital/./src/components/orbital/OrbitalMenu.vue?384c","webpack://orbital/./src/components/orbital/PopoverComponent.vue","webpack://orbital/./src/components/orbital/PopoverComponent.vue?1680","webpack://orbital/./src/components/orbital/search/CardSearch.vue","webpack://orbital/./src/components/orbital/search/CardSearch.vue?c3a4","webpack://orbital/./src/components/orbital/search/ListCards.vue","webpack://orbital/./src/components/orbital/search/ListCards.vue?ef9e","webpack://orbital/./src/components/orbital/search/SliderFilter.vue","webpack://orbital/./src/components/orbital/search/SliderFilter.vue?7ed6","webpack://orbital/./src/components/orbital/search/StagesFilter.vue","webpack://orbital/./src/components/orbital/search/StagesFilter.vue?3b2f","webpack://orbital/./src/components/orbital/search/StatusFilter.vue","webpack://orbital/./src/components/orbital/search/StatusFilter.vue?ed5e","webpack://orbital/./src/components/orbital/search/TypesFilter.vue","webpack://orbital/./src/components/orbital/search/TypesFilter.vue?004c"],"sourcesContent":["\nclass Animation{\n\n    /**\n     * @constructor\n     * @param {String} fileNameTemplate name of animation images , $ is replaced with id\n     * @param {Number} countSprite total of frames\n     * @param {Function} onFinishLoading callback when animation is loaded , return error if not loaded\n     * @param {Function} onLoadingChange callback when an image is added\n     */\n    constructor(fileNameTemplate , countSprite , onFinishLoading , onLoadingChange) {\n        this._images = [];\n        this._countSprite = countSprite;\n        this.imgLoaded = 0;\n\n\n        this._loadAnimation(fileNameTemplate , onFinishLoading , onLoadingChange);\n    }\n\n    /**\n     * \n     * @param {String} fileNameTemplate\n     * @param {Function} onFinishLoading \n     * @private\n     */\n    _loadAnimation(fileNameTemplate , onFinishLoading , onLoadingChange) {\n        let allPromises = [];\n        for (let i = 0; i < this._countSprite; i++) {\n            \n            const p = new Promise( (resolve , reject) => {\n                // replace ? with image id\n                const path = fileNameTemplate.replace('?' , i);\n    \n                // require and load the image\n                const imgPath = require('@/' + path);\n                const image = new Image();\n                image.src = imgPath;\n                this._images.push(image);\n                //console.log(this.images[i]);\n                image.addEventListener('load' , () => {\n                    this.imgLoaded ++;\n                    onLoadingChange();\n                    resolve();\n                });\n\n                image.addEventListener('error' , (e) => {\n                    console.log(e);\n                    reject(e);\n                });\n            });\n\n            //add the promise to the stack\n            allPromises.push(p);\n        }\n\n        // using Promise.all ensure the frames Multi-thread loaded\n        Promise.all(allPromises).then(() => {\n            onFinishLoading();\n        }).catch( (e) => {\n            onFinishLoading(e);\n        } )\n    }\n\n\n    findFrame(index) {\n        return this._images[index];\n    }\n\n}\n\n\nexport { Animation };","import { Animation } from \"./animation.js\"\nimport { Hotspots } from \"./hotspots.js\";\nimport { TilesController } from \"./tilesController.js\";\nimport { InputSystem } from \"./controls/input_system\";\nimport { Resizer } from \"./resizer\";\n\n/**\n * Animator handles drawing and animations interaction\n */\n\nclass Animator{\n\n    /**\n     * \n     * @param {Object} canvasGroup - all tools canvas \n     * @param {Array<String>} animationsPattern - array of animations path\n     * @param {Object} options\n     * @param {Array} hotspotRegions - hotspots regions , this is getting from the config file\n     */\n    constructor (canvasGroup , animationsPattern , options , hotspotRegions , regionInfo) {\n\n        this.canvasGroup = canvasGroup;\n\n        this.animationsPattern = animationsPattern;\n\n        this._options = options,\n\n        this.hotspots;\n        \n        this._tilesCanvas = canvasGroup.tilesCanvas;\n        this._animCanvas = canvasGroup.animation;\n        this._eventsCanvas = canvasGroup.eventsCanvas;\n\n        this._hotspotRegions = hotspotRegions;\n\n        this._regionInfo = regionInfo;\n\n        this.init();\n        \n    }\n\n    init() {\n\n        this._currentWidth = 0;\n        this._currentHeight = 0;\n\n        this._countFrames = this._options.framesCount;\n        this._tlTimeDraw = this._options.timeLineSpeed;\n\n        this._animations = [];\n\n        this.maxWidth = this._options.maxWidth;\n        this.maxHeight = this._options.maxHeight;\n\n        this._animationIndex = this._options.animStart;\n        this._frameIndex = this._options.frameStart;\n        \n        this.mobileWidth = 500;\n        this._reverse = false;\n        this._isPlaying = false;\n        this._currentFrame;\n        this._animationsReady = false;\n        this.cancel = false;\n\n        this._tilesController = null;\n        this._resizer = null;\n\n        this.percentLoaded = 0;\n        this._countAnimLoaded = 0;\n\n        this._zoomPoints = undefined;\n\n        this._animCtx = this._animCanvas.getContext(\"2d\");\n        this._tilesCtx = this._tilesCanvas.getContext(\"2d\");\n\n        this._loadAnimations();\n    }\n    \n    /**\n     * Load preloaded animations images\n     * @private\n     */\n    _loadAnimations() {\n\n        console.log(\"loading..\");\n\n        let loadPromises = [];\n\n        const total = this.animationsPattern.length * this._countFrames;\n        for (let i = 0; i < this.animationsPattern.length; i++) {\n            const promise = new Promise( (resolve , reject) => {\n                const pattern = this.animationsPattern[i];\n                const anim = new Animation(pattern , this._countFrames , \n                (error) => {\n                    if (this.cancel) reject(\"cancel\");\n\n                    if (typeof error !== \"undefined\") {\n                        reject(error);\n                    }else{\n                        resolve();\n                    }\n                } , \n                () => {\n\n                    this._countAnimLoaded++;\n                    this.percentLoaded = Math.round( (this._countAnimLoaded / total) * 100 );\n                    window.dispatchEvent(new CustomEvent(\"OnLoadingChange\" , {\n                        bubbles : false\n                    }))\n                });\n                this._animations.push(anim);\n            })\n\n            loadPromises.push(promise);\n        }\n\n        Promise.all(loadPromises)\n            .then( () => {\n                console.log(\"all animations loaded!\");\n                this._animationsReady = true;\n                this._setup();\n            } )\n            .catch( (e) => {\n                if(e === \"cancel\") return;\n                window.dispatchEvent(new CustomEvent(\"OnError\", {\n                    bubbles: false\n                }));\n                throw new Error('Error while loading animations! please check your images...');\n            });\n    }\n\n    /**\n     * setup the animator to be ready.\n     * Once ready we dispatch the \"OnAnimatorReady\" custom event\n     * @private\n     */\n    _setup() {\n\n        //setting the starting animation and frame\n        this._frameIndex = Math.min(Math.max(parseInt(this._frameIndex), 0), this._countFrames - 1);\n        this._animationIndex = Math.min(Math.max(parseInt(this._animationIndex), 0), this._animations.length - 1);\n\n        \n        this._resizer = new Resizer(this.canvasGroup);\n        this._initTiles();\n\n        this.hotspots = new Hotspots(this.canvasGroup, this._hotspotRegions , this._regionInfo);\n\n        this._inputSystem = new InputSystem(this._eventsCanvas , \n            {\n                width : this.maxWidth , \n                height : this.maxHeight\n            },\n            this._options.zoomOptions,\n            this._options.dragOptions,\n        );\n        \n\n        this._inputSystem.rect.addEventListener('OnZoom' , () => {\n            this._onZoomEvent();\n        });\n\n        this._inputSystem.rect.addEventListener('OnDrag' , (e) => {\n            this.onDragEvent(e);\n        });\n\n\n        window.onresize = () => {\n            this._resizer.resize();\n            this._inputSystem.zoom.setMaxZoom();\n            this.requestFrameDraw();\n        };\n\n        window.dispatchEvent(new CustomEvent(\"OnAnimatorReady\", {\n            bubbles: false\n        }));\n    }\n\n    /**\n     * instantiate tiles controller\n     * @private\n     */\n    _initTiles() {\n        this._tilesController = new TilesController(this._options);\n    }\n\n    /**\n     * Run the Animator after the ready state\n     */\n    run() {\n        this._showAnimationFrame(this._animationIndex , this._frameIndex);\n        if(this._options.autoplay){\n            window.setTimeout(() => this.play(), 0);\n        } \n    }\n\n    play() {\n        if(this._isPlaying)\n            return;\n\n        window.requestAnimationFrame( (timestamp) => {this._update(timestamp)} );\n        this._isPlaying = true;\n    }\n\n    stop() {\n        if(!this._isPlaying) return;\n        window.cancelAnimationFrame( (timestamp) => {this._update(timestamp)} );\n        this._isPlaying = false;\n    }\n\n    /**\n     * Timeline Update loop\n     * @param {Number} timestamp - timestamp after next draw\n     * @private\n     */\n    _update(timestamp) {\n\n        if(!this._animationsReady) {\n           return;\n        }\n        \n        if (this._startTime === undefined) {\n            this._startTime = timestamp;\n        }\n        const elapsed = timestamp - this._startTime;\n    \n        if(elapsed >= this._tlTimeDraw && this._isPlaying) {\n            this._step();\n            //this event is useful to rotate the compass when playing the timeline\n            window.dispatchEvent(new CustomEvent(\"OnUpdateTimeline\" , {\n                bubbles : false\n            }));\n            this._startTime = timestamp;\n        }\n\n        window.requestAnimationFrame( (timestamp) => {this._update(timestamp)} );\n\n    }\n\n    /**\n     * play one frame in the desired direction\n     * @param {Boolean} reverse - if true we step the animation reversed\n     * /@private\n     */\n    _step(reverse){\n        reverse = (reverse == undefined) ? this._reverse : reverse;\n        if(reverse) {\n            this._setPrevIndex();\n        }else{\n            this._setNextIndex();\n        }\n        this._showAnimationFrame(this._animationIndex , this._frameIndex);\n    }\n\n\n\n    /**\n     * draw call with request animation frame,\n     * see if the browser is ready to draw \n     * @public\n     */\n     requestFrameDraw() {\n        window.requestAnimationFrame( () => {this._draw()} );\n    }\n\n    /**\n     * draw the current frame,\n     * draw the hotspots,\n     * load and draw the tiles.\n     * @private\n     */\n    _draw(){\n\n        //dont draw if animator is not ready \n        if(!this._animationsReady) {\n            return;\n        }\n\n        \n        // getting info about the draw size , frame , scaleFactor\n        const anim = this._getAnimation();\n        this._currentFrame = anim.findFrame(this._frameIndex);\n        const scaleFactor = this._inputSystem.zoom.currentScale;\n\n        // calculate the current width and height\n        this._currentWidth = this.maxWidth * scaleFactor;\n        this._currentHeight = this.maxHeight * scaleFactor;\n\n        \n        // setting zoom offset based on zooming points\n        this._setZoomOffset();\n\n        // calculating x y coordinates from the center of the canvas minus zoom offsets\n        let x = Math.round( ( this._animCanvas.width*0.5 - this._currentWidth*0.5 ) - this._offsetX );\n        let y = Math.round( (this._animCanvas.height*0.5 - this._currentHeight*0.5) - this._offsetY );\n\n        // width is to small to zoom in/out, so centering the frame is the best option\n        if(this._animCanvas.width < this.mobileWidth) {\n            x = Math.round( this._animCanvas.width*0.5 - this._currentWidth*0.5 );\n            y = Math.round( this._animCanvas.height*0.5 - this._currentHeight*0.5 );\n            this._offsetX = 0;\n            this._offsetY = 0;\n        }\n\n        \n        // clearing the draw canvases , tiles must be cleared before the anim ctx(preloaded sizes canvas) \n        this._tilesCtx.clearRect(0, 0, this._tilesCanvas.width, this._tilesCanvas.height);\n        this._animCtx.clearRect(0, 0, this._animCanvas.width, this._animCanvas.height);\n\n        /**\n         * draw tiles if the canvas exist.\n         * Promise resolve canvas containing tiles or reject\n         */\n         const animIndex = this._animationIndex;\n         const frameIndex = this._frameIndex;\n         const offsetX = this._offsetX;\n         const offsetY = this._offsetY;\n\n        const pr = this._tilesController.fetchTiles(animIndex , frameIndex , this._currentWidth , scaleFactor);\n        pr.then(canvas => {\n            //check if scale is the same after loading the tile\n            const scale = this._inputSystem.zoom.currentScale;\n            if (\n                scale !== scaleFactor || \n                animIndex !== this._animationIndex || \n                frameIndex !== this._frameIndex ||\n                offsetX !== this._offsetX ||\n                offsetY !== this._offsetY\n            ) return;\n            \n            this._tilesCtx.drawImage(canvas , x, y , this._currentWidth , this._currentHeight);\n\n        }).catch(() => {\n            return;\n        });\n\n\n        // draw hotspots\n        this.hotspots.drawHts(this._animationIndex , this._frameIndex , this._currentWidth , this._currentHeight , this._offsetX , this._offsetY);\n\n        // draw the preloaded frame\n        this._animCtx.drawImage(this._currentFrame , x, y , this._currentWidth , this._currentHeight);\n        \n        \n    }\n\n    _setZoomOffset() {\n\n        if(this._offsetX === undefined) this._offsetX = 0;\n        if(this._offsetY === undefined) this._offsetY = 0;\n\n        if(this._zoomPoints === undefined) {\n            return;\n        }\n        \n        const screenCenterX = this._animCanvas.width*0.5;\n        const screenCenterY = this._animCanvas.height*0.5;\n        const xPivot = screenCenterX - (this._currentWidth*0.5) + this._offsetX;\n        const yPivot = screenCenterY - (this._currentHeight*0.5) + this._offsetY;\n        const framePosX = xPivot + this._currentWidth*0.5;\n        const framePosY = yPivot + this._currentHeight*0.5;\n        \n        let zPointx;\n        let zPointy;\n        \n        if(!this._inputSystem.zoom.isZoomIn || this._zoomPoints == -1){            \n            zPointx = screenCenterX - framePosX ;\n            zPointy = screenCenterY - framePosY ;\n        }else{\n            zPointx = this._zoomPoints.x - framePosX;\n            zPointy = this._zoomPoints.y - framePosY;\n        }\n        \n        const speed = 0.1;\n        const maxMagnitude = this._animCanvas.width * 0.1;\n        const angle = Math.atan2(zPointy , zPointx);\n\n        let magnitude = Math.sqrt(Math.pow(zPointx , 2) + Math.pow(zPointy , 2));\n        // limit the magnitude to avoid high speed zooming animation\n        if(magnitude > maxMagnitude) magnitude = maxMagnitude;\n\n        this._offsetX += Math.round( (magnitude * Math.cos(angle)) * speed );\n        this._offsetY += Math.round( (magnitude * Math.sin(angle)) * speed );\n\n        this._zoomPoints = undefined;\n    }\n\n    /**\n     * Switch to a desired Animation\n     * @param {Number} index - the animation index\n     */\n    switchAnimation(index) {\n        if(index < 0 || index >= this._animations.length) {\n            return;\n        }\n\n        this._showAnimationFrame(index , this._frameIndex);\n    }\n\n\n    /**\n     * \n     * @param {Number} animIndex - the animation index\n     * @param {Number} frameIndex - the frame index\n     * @private\n     */\n    _showAnimationFrame (animIndex , frameIndex) {\n        this._animationIndex = animIndex;\n        this._frameIndex = frameIndex;\n        this.requestFrameDraw();\n    }\n\n    \n\n    /**\n     * Play one frame\n     * @param {Boolean} reverse - is reversed direction\n     * @public\n     */\n    playFrame(reverse) {\n        this.stop();\n        this._step(reverse);\n    }\n\n\n    /**\n     * get the current animation\n     * @returns {Animation} the current animation\n     * @private\n     */\n    _getAnimation() {\n        return this._animations[this._animationIndex];\n    }\n\n    _setNextIndex() {\n        this._frameIndex++;\n        if (this._frameIndex >= this._countFrames) {\n            this._frameIndex = 0;\n        }\n    }\n\n    _setPrevIndex() {\n        this._frameIndex--;\n        if (this._frameIndex < 0) {\n            this._frameIndex = this._countFrames-1;\n        }\n    }\n\n    /**\n     * draw when zoom changed\n     * @private\n     */\n    _onZoomEvent(){\n        this._zoomLerp();\n        this.stop();\n        this.requestFrameDraw();\n    }\n\n    _zoomLerp () {\n        const points = this._inputSystem.zoom.zoomPoints;\n\n        if(points == -1) {\n           /*  this._zoomPoints.x = 0;\n            this._zoomPoints.y = 0; */\n            this._zoomPoints = -1;\n            return;\n        }\n\n        this._zoomPoints = points;\n        \n    }\n\n    /**\n     * draw when drag controls changed\n     * @private\n     */\n    onDragEvent(e){\n        this.playFrame(e.detail);\n    }\n\n}\n\n\nexport { Animator };","class CanvasBuilder {\n\n    /**\n     * \n     * @param {String} parentId - the app container ID\n     */\n    constructor (parentId) {\n\n        this._parentId = parentId;\n        this._parentElem;\n    }\n\n    createLayers() {\n\n        /**\n         * chek if there is a valid container\n         */\n        this._parentElem = document.getElementById(this._parentId);\n        if(!this._parentElem) {\n            alert(\"Orbital dom element not found !! \" + this._parentId);\n            throw new Error (\"Orbital dom element not found !!\" + this._parentId);\n        }\n\n        //setup the layers\n        const eventsCanvas = this.createCanvas(\"eventsCanvas\" , 99);\n        const htEffectCanvas = this.createCanvas(\"htEffectCanvas\" , 5);\n        const htDrawCanvas = this.createCanvas(\"htDrawCanvas\" , 4);\n        const tilesCanvas = this.createCanvas(\"tilesCanvas\" , 3);\n        const animCanvas = this.createCanvas(\"animCanvas\" , 2);\n        const htRefCanvas = this.createCanvas(\"htRefCanvas\" , 1);\n        \n        htRefCanvas.style.left = \"-300%\";\n        htRefCanvas.style.visibility = \"hidden\";\n\n        //add and return the canvas group\n        const layers = {\n            animation :  animCanvas,\n            hotspotsRef : htRefCanvas,\n            hotspotsDraw : htDrawCanvas ,\n            hotspotsEffects : htEffectCanvas,\n            eventsCanvas : eventsCanvas,\n            tilesCanvas : tilesCanvas\n        }\n        return layers;\n        \n    }\n\n    /**\n     * \n     * @param {Number} id - give the canvas element an ID\n     * @returns {HTMLCanvasElement} the created canvas\n     */\n    createCanvas (id , zId){\n        if(this._parentElem === null) return;\n        const canvas = document.createElement('canvas');\n        canvas.id     = id;\n        canvas.width  = document.documentElement.clientWidth;\n        canvas.height = document.documentElement.clientHeight;\n        //for our issue in oldest mobiles of the overflow, we set position to be fixed\n        canvas.style.position = \"fixed\"; \n        canvas.style.zIndex = zId;\n        canvas.style.top = 0;\n        canvas.style.left = 0;\n\n        this._parentElem.appendChild(canvas);\n        return canvas;\n    }\n}\n\n\nexport {CanvasBuilder}","class Drag {\n    /**\n     * control dragging events\n     * @param {HTMLCanvasElement} rect - canvas events capturer\n     * @param {object} dragOptions - drag options\n     */\n     constructor(rect , dragOptions) {\n        this.rect = rect;\n\n        // drag parameters\n        this._sensitivity = dragOptions.sensitivity; // drag sensitivity, heigher value for faster animation\n        this._threshold = dragOptions.threshold; // drag differnce to reach for a step\n        this._throwSens = dragOptions.throwSens; // drag throwing sensitivity , heigher value for faster animation\n        this._maxVelocity = dragOptions.maxVelocity; \n        /**\n         * when dragging with height velocity, we capture the number of frames to be played\n         * heigher value for faster animation\n         */\n        this._maxStepsCaptures = 50; \n        this.velocity = undefined;\n\n        //this._dragWait = 0;\n\n\n        this.isDragging = false;\n        this.reverse = true;\n\n        this._prevX = undefined;\n        this._prevT = undefined; // the previus time when dragging, useful to calculate the velocity\n        this._lastDiff = undefined; // the last drag difference\n        this._bounding;\n\n        this._waitTimout;\n\n        this.init();\n    }\n\n    /**\n     * get the canvas bounding rect\n     */\n    get _bounding(){\n        return this.rect.getBoundingClientRect();\n    }\n\n    init() {\n        this.clear();\n    }\n\n    /**\n     * clear the dragging params\n     */\n    clear(){\n        this.isDragging = false;\n        this._prevX = undefined;\n        this._prevT = undefined;\n        this._lastDiff = undefined;\n        clearTimeout(this._waitTimout);\n    }\n\n    //#region Mouse interactions\n    mouseDown(e){\n        this._startEvent(e.clientX);\n    }\n\n    mouseMove(e){\n        \n        if(!this.isDragging) return;\n        this._rotate(e.clientX);\n    }\n\n    mouseUp(){\n        this._endEvent();\n    }\n    //#endregion\n\n    //#region Touch interactions\n    touchStart(e) {\n        const touches = e.touches;\n        if(touches.length > 1) {\n            this.clear();\n            return\n        }\n        this._startEvent(touches[0].clientX);\n    }\n\n    touchMove(e) {\n        if(!this.isDragging) return;\n        const touches = e.touches;\n        if(touches.length > 1) {\n            this.clear();\n            return\n        }\n        \n        this._rotate(touches[0].clientX);\n    }\n\n    touchEnd() {\n        this._endEvent();\n    }\n    //#endregion\n\n\n    //#region Drag setup\n    _startEvent (clientX){\n        this.isDragging = true;\n        this._prevX = this._getCurrentX(clientX);\n        this._prevT = Date.now();\n        clearTimeout(this._waitTimout);\n    }\n    _endEvent (){\n        this.isDragging = false;\n        this._throw();\n        this._lastDiff = undefined;\n    }\n    //#endregion\n\n\n\n    /**\n     * animate when dragging\n     * @param {Number} clientX - x coordinate of the click/touch event\n     */\n    async _rotate(clientX){\n        \n        \n        //get the current x of the interaction\n        const currentX = this._getCurrentX(clientX);\n        //calculate the difference between the last pos and the current pos\n        this._lastDiff = Math.round(currentX - this._prevX);\n        const new_t = Date.now();\n        const elapsed = new_t - this._prevT;\n        //this.velocity = Math.sqrt(Math.pow(this._lastDiff , 2))/elapsed;\n        this.velocity = Math.abs(this._lastDiff/elapsed);\n\n        //compare the absolute difference and the mouse threshold\n        if(Math.abs(this._lastDiff) > this._threshold) {\n            \n            //check if direction is reversed\n            this.reverse = this._lastDiff > 0;\n\n            /**\n             * play animation based on the delta x movement,\n             * await the acceleration interval,\n             * then we drag the next iteration\n             */\n\n            const condition = Math.floor(this.velocity * this._sensitivity);\n            //console.log(condition);\n            for (let i = 0; i <= condition ; i++) {\n\n                \n                // acceleration timer\n                await this._wait(this.velocity);\n\n                /**\n                 * bind the OnDrag Event\n                 *  \n                 */\n                this.rect.dispatchEvent(new CustomEvent(\"OnDrag\", {\n                    bubbles: false,\n                    // detail :bool , indicate the drag direction (!reversed : right)\n                    detail : this.reverse\n                }));\n\n            }\n\n            //save the current params\n            this._prevX = currentX;\n            this._prevT = new_t;\n        }\n    }\n\n    /**\n     * throwing system with acceleration \n     * @returns null\n     */\n    async _throw(){\n        const absDiff = Math.abs(this._lastDiff);\n        if (this.isDragging || this._lastDiff === undefined || absDiff < this._threshold) {\n            this.clear();\n            return;\n        }\n\n        // get the direction\n        const reverse = this._lastDiff > 0;\n\n        // saved captures when dragging , based on acceleration and mapped to the max captures\n        let captures = Math.round( Math.abs(this.velocity) ) * this._throwSens;\n        captures = captures > this._maxStepsCaptures ? this._maxStepsCaptures : captures;\n        \n        // mapping the velocity to the max velocity\n        this.velocity = this.velocity > this._maxVelocity ? this._maxVelocity : this.velocity;\n        // inverting the value based on the max velocity\n        this.velocity = this._maxVelocity - this.velocity;\n\n        for (let i = 0; i < captures ; i++) {\n            if (this.isDragging) {\n                this.clear();\n                break;\n            }\n            \n            await this._wait(this.velocity);\n            this.rect.dispatchEvent(new CustomEvent(\"OnDrag\", {\n                bubbles: false,\n                detail : reverse\n            }));\n            const ease = this._easeOutSine(i/captures);\n            this.velocity += ease * this._sensitivity;\n        }\n    }\n    \n    /**\n     * Sin ease function \n     * @param {Number} x value from 0 to 1\n     * @returns easing value from 0 to 1\n     */\n    _easeOutSine(x) {\n        return Math.sin((x * Math.PI) / 2);\n    }\n\n\n    /**\n     * timer with promise\n     * @returns {Promise} the wait promise\n     */\n     _wait(ms) {\n        const p = new Promise( (resolve) => {\n            this._waitTimout = setTimeout( () => {\n                resolve();\n            } , ms);\n        } );\n        \n        return p;\n    }\n\n\n    /**\n     * return the valid click or touch \n     * @param {Number} clientX the clientX of the interaction\n     * @returns {Number} valid click/touch in the rect\n     */\n    _getCurrentX(clientX) {\n        return clientX - this._bounding.left;\n    }\n\n}\n\nexport {Drag}","import { Zoom } from \"./zoom\";\nimport { Drag } from \"./drag\";\n\nclass InputSystem {\n    constructor(rect , naturalSizes , zoomOptions , dragOptions) {\n        this.rect = rect;\n        this.drag = new Drag(rect , dragOptions);\n        this.zoom = new Zoom(rect , naturalSizes , zoomOptions);\n        \n        this.init();\n    }\n\n    _hasTouch() {\n        return (('ontouchstart' in window));\n    }\n\n    init() {\n        \n        if(this._hasTouch()) {\n            console.log(\"touch support\");\n            //touch events listeners\n            this._touchListeners();\n        }else{\n            // mouse events\n            this._mouseListeners();\n            /**\n             * zoom control events\n             */\n            this._pointerZoomEvent();\n        }\n\n        this.rect.addEventListener('wheel', (e) => {\n            e.preventDefault();\n            this.zoom._wheelZoom(e);\n        });\n\n    }\n\n    _mouseListeners(){\n        this.rect.onmousedown = e => {\n            if(e.button === 0) this._mouseDown(e);            \n        }\n\n        this.rect.onmousemove = e => {\n            this._mouseMove(e);\n        }\n\n        this.rect.onmouseup = (e) => {\n            this._mouseUp(e);\n        }\n    }\n\n    _touchListeners(){\n        this.rect.addEventListener(\"touchstart\" , (e) => {\n            this._touchStart(e);\n        });\n\n        this.rect.addEventListener(\"touchmove\" , (e) => {\n            e.preventDefault();\n            this._touchMove(e);\n        } , { passive: false }); // without !passive event isn't preventing default behavior in ios safari 15+\n\n        this.rect.addEventListener(\"touchend\" , (e) => {\n            this._touchEnd(e);\n        });\n    }\n\n    \n    _pointerZoomEvent(){\n        \n        //pointer events for zoom\n        this.rect.addEventListener(\"pointerdown\" , (e) => {\n            if(e.button !== 0) {\n                this.zoom.pointerEnd(e);\n                return;\n            }\n            this.zoom.pointerStart(e);\n        });\n\n        this.rect.addEventListener(\"pointermove\" , (e) => {\n            e.preventDefault();\n            this.zoom.pointerMove(e);\n        });\n\n        this.rect.addEventListener(\"pointerup\" , (e) => {\n            this.zoom.pointerEnd(e);\n            \n        });\n\n        this.rect.addEventListener(\"pointercancel\" , (e) => {\n            this.zoom.pointerEnd(e);\n           \n        });\n\n        this.rect.addEventListener(\"pointerout\" , (e) => {\n            this.zoom.pointerEnd(e);\n        });\n\n        this.rect.addEventListener(\"pointerleave\" , (e) => {\n            this.zoom.pointerEnd(e);\n        });\n    }\n\n\n    \n\n\n    //#region Mouse interactions\n    _mouseDown(e){\n        this.drag._startEvent(e.clientX);\n    }\n    _mouseMove(e){\n        \n        if(this.zoom.isZooming){\n            this.drag.clear();\n            return;\n        } \n        \n        this.drag.mouseMove(e);\n    }\n    _mouseUp(e){\n        this.drag.mouseUp(e);\n    }\n    //#endregion\n\n\n\n    //#region Touch interactions\n    _touchStart(e) {\n        const touches = e.changedTouches;\n        this.zoom.touchStart(e);\n        this.drag._startEvent(touches[0].clientX);\n        \n    }\n    _touchMove(e) {\n        this.zoom.touchMove(e);\n        if(this.zoom.isZooming){\n            this.drag.clear();\n            return;\n        } \n        this.drag.touchMove(e);\n        \n        \n    }\n    _touchEnd(e) {\n        this.zoom.touchEnd(e);\n        this.drag._endEvent();\n    }\n    //#endregion\n}\n\n\nexport {InputSystem}","class Zoom {\n\n    /**\n     * \n     * @param {HTMLCanvasElement} rect - rect containing events\n     * @param {Object} naturalSizes - natural size of images\n     * @param {Number} naturalSizes.width - natural images width \n     * @param {Number} naturalSizes.height - natural images height \n     * @param {Object} options - zoom params\n     */\n    constructor(rect , naturalSizes , options){\n        this.rect = rect;\n        this._naturalSizes = naturalSizes;\n        this.options = options;\n\n        //cache Pointers event\n        this.evCache = [];\n        this.prevDiff = -1;\n\n        //cache Touches event\n        this.prevTouchDiff = -1;\n\n        this.isZooming = false;\n\n        this.zoomPoints = -1;\n\n        this.init();\n    }\n\n    init() {\n\n        this.defaultOptions = {\n            scaleFactor : 0.03,\n            currentScale : 0.5,\n            minScale : 0.26,\n            maxScale : 1,\n            scaleMargins : 0.2,\n            zoomInterval : 16.66\n        };\n        this.setOptions(this.options);\n        this.setMaxZoom();\n\n        \n    }\n\n    /**\n     * set the zoom options\n     * @param {Object} options - zoom options\n     * @param {Number} options.scaleFactor \n     * @param {Number} options.currentScale\n     * @param {Number} options.minScale \n     * @param {Number} options.maxScale\n     * @public\n     */\n    setOptions(options) {\n\n        if (typeof(options) == \"undefined\") {\n\n            this.options = this.defaultOptions;\n\n        }else {\n            Object.keys(options).forEach((opt) => {\n\n                if(typeof(this.options[opt]) !== \"undefined\") {\n                    this.options[opt] = options[opt]\n                }\n                \n            })\n        }\n\n        this.currentScale = this.options.initScale;\n        this.scaleFactor = this.options.scaleFactor;\n        this.minScale = this.options.minScale;\n        this.maxScale = this.options.maxScale;\n        this.scaleMargins = this.options.scaleMargins;\n\n    }\n\n\n    //#region Touch interactions\n    touchStart(e) {\n        if(e.touches.length === 2) {\n            this.isZooming = true;\n        }\n        \n    }\n    touchMove(e) {\n        if(e.touches.length === 2) {\n            const curDiff = Math.abs(e.touches[0].clientX - e.touches[1].clientX);\n            \n            if (this.prevTouchDiff > 0) {\n\n                let zoomIn;\n\n                if(curDiff > this.prevTouchDiff) {\n                    zoomIn = true;\n                }\n\n                if(curDiff < this.prevTouchDiff) {\n                    zoomIn = false;\n                }\n\n                const pinchCenter = this._getPinchCenter(\n                    e.touches[1].clientX, \n                    e.touches[0].clientX,\n                    e.touches[1].clientY,\n                    e.touches[0].clientY,\n                );\n\n                this._pinchZoom(zoomIn , pinchCenter.xPoint , pinchCenter.yPoint);\n            }\n            // Cache the distance for the next move event\n            this.prevTouchDiff = curDiff;\n        }\n        \n    }\n    touchEnd(e) {\n        this.isZooming = false;\n        // If the number of pointers down is less than two then reset diff tracker\n        if (e.changedTouches.length < 2) {\n            this.prevTouchDiff = -1;\n        }\n        \n    }\n    //#endregion\n\n\n\n\n    \n    //#region Pointer interactions\n    pointerStart(e) {\n        this.evCache.push(e);\n        \n    }\n\n    pointerMove(e) {\n\n        // Find this event in the cache and update its record with this event\n        const index = this.evCache.findIndex((cachedEv) => cachedEv.pointerId === e.pointerId);\n        this.evCache[index] = e;\n\n        // If two pointers are down, check for pinch gestures\n        if (this.evCache.length === 2) {\n            // Calculate the distance between the two pointers\n            const curDiff = Math.abs(this.evCache[0].clientX - this.evCache[1].clientX);\n\n            if (this.prevDiff > 0) {\n\n                let zoomIn = true;\n\n                if(curDiff > this.prevDiff) {\n                    zoomIn = true;\n                }\n\n                if(curDiff < this.prevDiff) {\n                    zoomIn = false;\n                }\n\n                const pinchCenter = this._getPinchCenter(\n                    this.evCache[1].clientX, \n                    this.evCache[0].clientX,\n                    this.evCache[1].clientY,\n                    this.evCache[0].clientY,\n                );\n\n                this._pinchZoom(zoomIn , pinchCenter.xPoint , pinchCenter.yPoint);\n            }\n            // Cache the distance for the next move event\n            this.prevDiff = curDiff;\n            \n        } \n    }\n\n    pointerEnd() {\n        this.isZooming = false;\n        // Remove this pointer from the cache\n        //this._removeEvent(e);\n        this.evCache = [];\n        //console.log(e);\n        // If the number of pointers down is less than two then reset diff tracker\n        /* if (this.evCache.length < 2) {\n            this.prevDiff = -1;\n        } */\n    }\n\n    _getPinchCenter(x0 , x1 , y0 , y1) {\n        const diffX = x1 - x0;\n        const diffY = y1 - y0;\n        const xPoint = x0 + diffX * 0.5;\n        const yPoint = y0 + diffY * 0.5;\n        return {xPoint , yPoint};\n    }\n\n    _removeEvent(e) {\n        // Remove this event from the target's cache\n        const index = this.evCache.findIndex((cachedEv) => cachedEv.pointerId === e.pointerId);\n        this.evCache.splice(index, 1);\n      }\n    //#endregion\n\n    \n\n\n    /**\n     * set manual zoom\n     * @param {Boolean} zoomIn \n     * @returns null\n     */\n    setZoom(zoomIn){\n        if(!this._canZoom(zoomIn)) return;\n        this.isZoomIn = zoomIn;\n        this.isZooming = true;\n        this._limitScale();\n        this.zoomPoints = -1;\n        this.rect.dispatchEvent(new CustomEvent(\"OnZoom\", {\n            bubbles: false\n        }));\n\n        this.isZooming = false;\n    }\n\n    /**\n     * set pinch zoom\n     * @param {Boolean} zoomIn \n     * @returns null\n     */\n    _pinchZoom(zoomIn , xPoint , yPoint){\n\n        if(!this._canZoom(zoomIn)) return;\n        this.isZoomIn = zoomIn;\n        this.isZooming = true;\n        this._limitScale();\n\n        this._setZoomPoints(xPoint , yPoint);\n        \n        this.rect.dispatchEvent(new CustomEvent(\"OnZoom\", {\n            bubbles: false\n        }));\n    }\n\n\n    /**\n     * set wheel zoom\n     * @param {object} e \n     * @returns null\n     */\n    _wheelZoom(e){\n\n        if(!this._canZoom(e.deltaY < 0)) return;\n        this.isZoomIn = e.deltaY < 0;\n\n        this._limitScale();\n\n        const xPoint = e.clientX - this.rect.getBoundingClientRect().left;\n        const yPoint = e.clientY - this.rect.getBoundingClientRect().top;\n        this._setZoomPoints(xPoint , yPoint);\n        \n        this.rect.dispatchEvent(new CustomEvent(\"OnZoom\", {\n            bubbles: false\n        }));\n        \n    }\n\n    _canZoom(zoomIn) {\n        const timestamp = Date.now();\n        if (this.zoomTimeStart === undefined) {\n            this.zoomTimeStart = timestamp;\n        }\n        const elapsed = timestamp - this.zoomTimeStart;\n    \n        if(elapsed <= this.options.zoomInterval) { //framerate simulation\n            return false;\n        }\n        this.zoomTimeStart = timestamp;\n        \n        if(zoomIn) {\n            //zoom in\n            if(this.currentScale >= this.maxScale) return false\n            this.currentScale += this.scaleFactor;\n        }else{\n            //zoomOut\n            if(this.currentScale <= this.minScale) return false;\n            this.currentScale -= this.scaleFactor;\n        }\n\n        return true;\n    }\n\n\n\n    _limitScale() {\n        if(this.currentScale >= this.maxScale || this.currentScale <= this.minScale) {\n            this.currentScale = Math.min(Math.max(this.currentScale, this.minScale), this.maxScale);\n        }\n        \n    }\n    \n    \n    setMaxZoom() {\n        const natWidth = this._naturalSizes.width;\n        let scale = document.documentElement.clientWidth / natWidth;\n        scale += this.scaleMargins;\n        if(scale >= 1){\n            this.currentScale = this.maxScale;\n            return;\n        } \n\n        if(scale <= this.minScale){\n            this.maxScale = this.minScale;\n            this.currentScale = this.minScale;\n            return;\n        } \n\n        \n        this.maxScale = scale;\n        if(scale < this.currentScale ){\n            this.currentScale = scale;\n        }\n        \n    }\n\n    _setZoomPoints(x , y){\n        if(this._canZoomInPoint()) {\n            this.zoomPoints = {\n                x : x, \n                y : y\n            };\n        }else{\n            this.zoomPoints = -1;\n        }\n    }\n\n    _canZoomInPoint() {\n        const scaleAmount = 0.4; // scale amount to apply points zooming\n        const rayScale = this.minScale + ((this.maxScale - this.minScale) * scaleAmount);\n        return this.currentScale > rayScale;\n    }\n      \n      \n\n}\n\nexport {Zoom}","import { COLOR_HELPER} from \"../utils/helpers\";\nimport APP_DATA  from \"@/assets/appData.json\";\n\n\nclass Hotspots{\n\n    /**\n     * @param {Object} canvasGroup the app canvas object\n     * @param {HTMLCanvasElement} canvasGroup.eventsCanvas - events capture\n     * @param {HTMLCanvasElement} canvasGroup.hotspotsDraw - hotspots drawer\n     * @param {HTMLCanvasElement} canvasGroup.hotspotsEffects - hotspots Effects\n     * @param {HTMLCanvasElement} canvasGroup.animation - animation drawer\n     * @param {HTMLCanvasElement} canvasGroup.tilesCanvas - tiles drawer\n     * @param {HTMLCanvasElement} canvasGroup.hotspotsRef - hotspots references drawer\n     * @param {Array<object>} hotspotRegions\n     * @param {Object} regionsInfo\n     */\n    constructor(canvasGroup , hotspotRegions , regionsInfo)\n    {\n        this._canvasGroup = canvasGroup;\n        \n        this._hotspotRegions = hotspotRegions;\n\n        this.regionsInfo = regionsInfo;\n\n        this.imgW, this.imgH , this.level = 0 , this.frame = 0;\n\n        this.htDrawCtx , this.htRefCtx;\n\n        /**\n         * array containing all hotspots,\n         * ordered by level and frame,\n         * ukey is the unique color to be pointed when hovering a polygon,\n         * pointing to unique color instead of looping trough all filtredRegions by row,\n         * the column ... is moore efficient\n         * e.g this.filtredRegions[row][column][uKey] = {}\n         */\n        this.filtredRegions = [[[]]];\n        \n        /**\n         * the unique color set, we use Set to ensure non duplicate value\n         */\n        this._uColorSet;\n        \n\n        /**\n         * object of filters to be applied when drawing hotspots,\n         * e.g this.filterOptions.surface = {min : Number , max:Number}\n         */\n        this.filterOptions = {};\n\n        this._hsRefTimer;\n        this._delayRefDraw = 500;\n\n        this._lastHovered = undefined;\n\n        this.init();\n    }\n\n    init(){\n        \n        this.htDrawcanvas = this._canvasGroup.hotspotsDraw;\n        this.htEffectCanvas = this._canvasGroup.hotspotsEffects;\n        this.htRefCanvas = this._canvasGroup.hotspotsRef;\n        this.htEvtCanvas = this._canvasGroup.eventsCanvas;\n\n        this.htDrawCtx = this.htDrawcanvas.getContext(\"2d\");\n        this.htEffectCtx = this.htEffectCanvas.getContext(\"2d\");\n        this.htRefCtx = this.htRefCanvas.getContext(\"2d\" , {willReadFrequently: true }); // For more info about the [willReadFrequently] : https://html.spec.whatwg.org/multipage/canvas.html#dom-canvasrenderingcontext2dsettings-willreadfrequently\n        this.htEvtCtx = this.htRefCanvas.getContext(\"2d\");\n        \n\n        this.typesColors = APP_DATA.hotspots.color_HS;\n        \n        \n        this.setupFromXml();\n\n        //this.setup3DProjection();\n        this.drawHts();\n        this.hSEvents();\n        \n    }\n    \n\n    /**\n     * setup the filtred regions,\n     * not that this method can change depending on the data comming from the config file ,\n     * for now we just test...\n     */\n    setupFromXml() {\n        this._uColorSet = new Set();\n\n        \n        this._hotspotRegions.forEach(ht => {\n\n            // name of the polygon\n            const name = ht.$.id;\n            \n            //get the background color and transform to hex code\n            const type = this.regionsInfo[name].type;\n            //const polyColor = ht.$.backgroundcolor.replace(\"0x\" , \"#\");\n            const polyColor = this.typesColors[type];\n            \n            // get the opacity\n            //const polyAlpha = ht.$.backgroundalpha;\n            const polyAlpha = 0.4;\n\n            \n\n            // for every hotspots polygon\n            ht.polygon.forEach(p => {\n\n                //get the polygon\n                const poly = p.$;\n                \n                // get the level\n                const row = parseInt(poly.state);\n\n                //get the frame\n                const column = parseInt(poly.column);\n\n                // get the formated positions\n                const fPos = this._formatPositions(poly.vertices);\n\n                // get the unique color to be indexed with the polygon\n                let uniqColor = COLOR_HELPER.getUniqColor(this._uColorSet);\n                this._uColorSet.add(uniqColor);\n                uniqColor = COLOR_HELPER.hexToRgb(uniqColor);\n                \n                const polyObj = {\n                    name : name,\n                    polygon : fPos,\n                    colorRef : uniqColor,\n                    fillColor : polyColor,\n                    alpha : polyAlpha,\n\n                }\n\n                // create unique key based on the unique color \n                const uKey = COLOR_HELPER.getColorString(uniqColor);\n\n                /**\n                 * prepare the multi dimensional array, \n                 * row for every level, and column for every frame\n                 */\n                if(typeof(this.filtredRegions[row]) === \"undefined\") {\n                    this.filtredRegions[row] = [];\n                }\n                if(typeof(this.filtredRegions[row][column]) === \"undefined\") {\n                    this.filtredRegions[row][column] = [];\n                }\n\n                //add the poly indexed by the unique key\n                this.filtredRegions[row][column][uKey] = polyObj;\n            })\n                        \n\n        })\n\n        //clear garbage\n        this._hotspotRegions.length = 0;\n\n    }\n\n\n    drawHts(level , frame , imgW , imgH , offsetX , offsetY) {\n        this.level = level;\n        this.frame = frame;\n        this.imgW = imgW;\n        this.imgH = imgH;\n        this.offsetX = offsetX;\n        this.offsetY = offsetY;\n        this._drawHts();\n    }\n\n\n    _drawHts() {\n        window.clearTimeout(this._hsRefTimer);\n        this._clearCtx(this.htRefCtx);\n        this._clearCtx(this.htEffectCtx);\n        \n        this.drawHotspots();\n\n        this._hsRefTimer = window.setTimeout( () => {\n            this.drawHotspotsRef();\n        } , this._delayRefDraw);\n    }\n\n    drawHotspots() {\n\n        this._clearCtx(this.htDrawCtx);\n        const region = this._getCurrentRegion();\n\n        if(region == undefined) return;\n        \n        Object.values(region).forEach((poly) => {\n            \n            if(this.validate(poly.name)) {\n                const positions = poly.polygon;\n                const c = COLOR_HELPER.getColorFill(COLOR_HELPER.hexToRgb(poly.fillColor) , poly.alpha);\n                this._drawPolygon(this.htDrawCtx , positions , c , undefined , 1);\n            }\n            \n        })\n\n    }\n\n\n    /**\n     * hospots reference, this is the main handler of all interactions with the hotspots,\n     */\n    drawHotspotsRef() {\n        const region = this._getCurrentRegion();\n        if(region == undefined) return\n\n        this._clearCtx(this.htRefCtx);\n\n        Object.values(region).forEach((poly) => {\n            \n            if(this.validate(poly.name)) {\n                const positions = poly.polygon;\n                const fill = COLOR_HELPER.getColorFill(poly.colorRef , 1);\n    \n                requestAnimationFrame(() => this._drawPolygon(this.htRefCtx , positions , fill , undefined));\n            }\n\n        })\n\n    }\n\n    _drawPolygon(ctx , positions , fillStyle , strokeStyle , lineWidth = 2) {\n\n        ctx.strokeStyle = strokeStyle;\n        ctx.lineWidth = 1.0;\n        ctx.fillStyle = fillStyle;\n\n        ctx.lineWidth = lineWidth;\n\n        ctx.beginPath();\n        for (let i = 0; i < positions.length; i++) {\n            const points = positions[i];\n\n            const margX = Math.round( (ctx.canvas.width - this.imgW) * 0.5 );\n            const margY = Math.round( (ctx.canvas.height - this.imgH) * 0.5 );\n\n            //console.log(margX , margY);\n\n            const x = ((points.x * this.imgW) + margX) - this.offsetX;\n            const y = (points.y * this.imgH + margY) - this.offsetY;\n\n            ctx.lineTo(x ,y);\n        }\n\n        ctx.fill();\n        \n        ctx.closePath();\n        if(strokeStyle) ctx.stroke();\n    }\n\n\n    /**\n     * \n     * @param {String} regionName \n     * @returns {Boolean} \n     */\n    validate(regionName) {\n        const infoPoly = this.regionsInfo[regionName];\n        if(infoPoly !== undefined) {\n            const surface = parseInt( infoPoly.surface , 10 );\n            const type = infoPoly.type;\n            const filterOpt = this.filterOptions.surface;\n            const filterTypes = this.filterOptions.types;\n\n            if(filterOpt === undefined || filterTypes === undefined) return false;\n\n            if(surface < filterOpt.minSurface || surface > filterOpt.maxSurface) {\n                return false;\n            }\n\n            if(!filterTypes.includes(type)) return false;\n            \n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * \n     * @param {Object} surface the surface object to filter by\n     */\n    setSurfaceFilter(surface) {\n        this.filterOptions.surface = {\n            minSurface : surface.min,\n            maxSurface : surface.max,\n        }\n        this._updateHotspots();\n    }\n\n    setTypesFilter(types) {\n        this.filterOptions.types = types\n        this._updateHotspots();\n    }\n\n\n    _updateHotspots() {\n        this._drawHts();\n    }\n    \n    /**\n     * \n     * @param {String} pos polygon positions\n     * @returns {Array} formated positions\n     */\n    _formatPositions(pos){\n        let positions = [];\n        const reg = pos;\n        const polys = reg.split('|');\n        for (let i = 0; i < polys.length; i++) {\n            const coor = polys[i].split(\";\");\n            \n            for (let j = 0; j < coor.length; j++) {\n                const obj = coor[j].split(\",\");\n                positions.push({\n                    x : obj[0],\n                    y : obj[1],\n                })\n            }\n            }\n        return positions;\n    }\n    \n    \n\n\n\n    hSEvents() {\n\n        this.htEvtCanvas.addEventListener(\"mousemove\" , (e) => {\n            this.mouseMoveEvent(e);\n        });\n\n        \n        if(window.PointerEvent) {\n\n            this.htEvtCanvas.addEventListener(\"pointerdown\" , (e) => {\n                this._startEvent(e);\n            });\n            this.htEvtCanvas.addEventListener(\"pointerup\" , (e) => {\n                if(this._canClick()) {\n                    this.clickEvent(e);\n                }\n                \n            });\n\n        }else{\n\n            this.htEvtCanvas.addEventListener(\"mousedown\" , (e) => {\n                this._startEvent(e);\n            });\n            this.htEvtCanvas.addEventListener(\"mouseup\" , (e) => {\n                if(this._canClick()) {\n                    this.clickEvent(e);\n                }\n            });\n\n            this.htEvtCanvas.addEventListener(\"touchstart\" , (e) => {\n                this._startEvent(e);\n            });\n    \n            this.htEvtCanvas.addEventListener(\"touchend\" , (e) => {\n                if(this._canClick()) {\n                    this.touchEvent(e);\n                }\n            });\n        }\n        \n    }\n\n    mouseMoveEvent(e) {\n        const insideData = this._getHotspotData({x : e.clientX , y : e.clientY});\n        if( insideData === undefined ){\n            this._regionOutState();\n            return;\n        }\n        this._regionHoverState(insideData , {x : e.clientX , y : e.clientY});\n        \n    }\n\n\n    clickEvent(e){\n        const insideData = this._getHotspotData({x : e.clientX , y : e.clientY});\n        if( insideData !== undefined ){\n            this._regionClickState(insideData , {x : e.clientX , y : e.clientY});\n        }\n    }\n    touchEvent(e){\n        const touch = e.changedTouches[0];\n        const insideData = this._getHotspotData({x : touch.clientX , y : touch.clientY});\n        if( insideData !== undefined ){\n            this._regionClickState(insideData , {x : touch.clientX , y : touch.clientY});\n        }\n    }\n\n    \n\n    _startEvent(){\n        this.timeStart = Date.now();\n    }\n\n    _canClick() {\n        const t = Date.now();\n\n        const elapsed = t - this.timeStart;\n\n        if(elapsed < 300) {\n            return true;\n        }\n\n        return false;\n    }\n\n    _regionHoverState(color , mousePos) {\n\n        const regionData = this._getSelectedHotspot(color);\n        if(!regionData) {\n            return;\n        }\n\n        \n        const region = regionData.region;\n        if(this._lastHovered === undefined) {\n            this._setHsEffect(region);\n        }else{\n            \n            if(this._lastHovered.name !== region.name){\n                this._clearCtx(this.htEffectCtx);\n                this._setHsEffect(region);\n            }\n        }\n        \n\n        //add hover inline css style\n        this.htEvtCanvas.style.cursor = \"pointer\";\n\n        /**\n         * dispatch the OnHSHover global event on the window,\n         * sending mousePos and the hovered polygon\n         */\n\n        window.dispatchEvent(new CustomEvent(\"OnHSHover\", {\n            bubbles: false,\n            detail : {\n                mousePos : mousePos,\n                region : regionData.region\n            }\n        }));\n    }\n\n    _regionOutState(){\n\n        if(this._lastHovered !== undefined){\n            this._clearCtx(this.htEffectCtx);\n            this._lastHovered = undefined;\n        } \n        \n\n        this.htEvtCanvas.style.cursor = \"default\";\n        window.dispatchEvent(new CustomEvent(\"OnHSHoverOut\", {\n            bubbles: false,\n        }));\n    }\n\n    _regionClickState(color , mousePos) {\n\n        this._regionOutState();\n        const regionData = this._getSelectedHotspot(color);\n        \n        if(regionData === undefined) {\n            return;\n        }\n\n        /**\n         * dispatch the OnHSClick global event on the window,\n         * sending mousePos and the clicked polygon info\n         */\n        const regionName = regionData.region.name;\n        window.dispatchEvent(new CustomEvent(\"OnHSClick\", {\n            bubbles: false,\n            detail : {\n                mousePos : mousePos,\n                region : this.regionsInfo[regionName]\n            }\n        }));\n\n    }\n\n    _setHsEffect(region){\n        this._drawPolygon(this.htEffectCtx , region.polygon , 'transparent' , '#FFFFFF' , 2);\n        this._lastHovered = region;\n    }\n\n\n    _getHotspotData(pos) {\n        const bounding = this.htDrawcanvas.getBoundingClientRect();\n        const x = Math.round(pos.x - bounding.left);\n        const y = Math.round(pos.y - bounding.top);\n\n        // Get image pixel coordinate\n        const pixel = this.htRefCtx.getImageData(x, y, 1, 1);\n        const data = pixel.data;\n\n        // if color is not matching any poly \n        if( data[0] === 0 && data[1] === 0 && data[2] === 0 ){\n            \n            return undefined;\n        }\n        \n        return data;\n    }\n\n    _getSelectedHotspot(color){\n\n        //get the current region from filtered regions based on frame and level\n        const region = this._getCurrentRegion();\n        if(region === undefined) return undefined;\n\n        //get the RGB color\n        const c = {red : color[0] , green:color[1] , blue :color[2] }\n\n        //get the key string from the color\n        const cString = COLOR_HELPER.getColorString(c);\n\n        //point to the polyon with the given key\n        const poly = region[cString];\n        if(poly === undefined) {\n            return undefined;\n        }\n\n        return {region : poly };\n    }\n\n\n\n\n\n    \n\n    /**\n     * return the current region based on current level and frame\n     * @returns {Array<Object>} current region\n     */\n    _getCurrentRegion(){\n\n        if(typeof(this.filtredRegions[this.level]) === \"undefined\") {\n            this._clearCtx(this.htRefCtx);\n            return undefined;\n        }\n\n        if(typeof(this.filtredRegions[this.level][this.frame]) === \"undefined\") {\n            this._clearCtx(this.htRefCtx);\n            return undefined;\n        }\n\n        return this.filtredRegions[this.level][this.frame];\n    }\n\n    _clearCtx(ctx) {\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    }\n        \n}\n\n\nexport { Hotspots}","import { Animator } from \"./animator\";\nimport { CanvasBuilder } from \"./canvasBuilder\";\nimport { XmlManager } from \"@/utils/helpers\";\n\nimport APP_DATA  from \"@/assets/appData.json\";\n\nclass Orbital {\n    constructor(container , regionsInfo){\n        \n        this.xml;\n\n        this.container = container;\n\n        this._regionsInfo = regionsInfo;\n\n        this.animationsPaths = [];\n\n        this.animator, this.canvasBuilder;\n\n\n    }\n\n    init(){\n\n        this.xml = new XmlManager(\"config.xml\");\n\n        this.xml.loadXmlData(() => {\n            this.htFromXml = this.xml.getHotspots();\n            this._setup();\n        });\n    }\n\n    _setup() {\n        \n        const params = APP_DATA.params;\n        const levelsCount = params.animationsCount;\n        let lPath = params.imagesFolder + params.preloadedFolder;\n        \n        for (let i = 0; i < levelsCount; i++) {\n            \n            const p = lPath.replace(/%row/g , i).replace(/%col/g , \"?\");\n            this.animationsPaths.push(p);\n        }\n\n        this.canvasBuilder = new CanvasBuilder(this.container);\n\n        const layers = this.canvasBuilder.createLayers();\n\n        const options = {\n            maxWidth : params.maxWidth,\n            maxHeight : params.maxHeight,\n            imagesFolder : params.imagesFolder,\n            framesCount : params.framesCount,\n            timeLineSpeed : params.timeLineSpeed,\n            autoplay : params.autoplay,\n            frameStart : params.frameStart,\n            animStart : params.animStart,\n            \n            tilesFolder : APP_DATA.tiles.tilesFolder,\n            breakpoints_sizes : APP_DATA.tiles.breakpoints_sizes,\n            breakpoints : APP_DATA.tiles.breakpoints,\n            breakpoints_folder : APP_DATA.tiles.breakpoints_folder,\n            maxCache : APP_DATA.tiles.maxTilesCache,\n            cropSize : APP_DATA.tiles.cropSize,\n\n            zoomOptions : APP_DATA.controls.zoom,\n            dragOptions : APP_DATA.controls.drag,\n        };\n\n\n        this.animator = new Animator(\n            layers,\n            this.animationsPaths ,\n            options,\n            this.htFromXml,\n            this._regionsInfo\n        );\n\n        window.addEventListener(\"OnAnimatorReady\" , () => this.appReady() , {once : true});\n        this._setConfigStyles();\n\n    }\n\n    _setConfigStyles(){\n        if(this.animator === undefined) return;\n        document.getElementById(this.container).style.backgroundColor = APP_DATA.params.bg_color;\n    }\n\n    appReady() {\n\n        this.animationsPaths = null;\n\n        this.animator.run();\n\n        window.dispatchEvent(new CustomEvent(\"OnAppReady\", {\n            bubbles: false\n        }));\n    }\n    \n\n    getPercentLoaded() {\n        if(this.animator === undefined) return 0;\n        return this.animator.percentLoaded;\n    }\n\n    playOrbital(){\n        this.animator.play();\n    }\n\n    stopOrbital(){\n        this.animator.stop();\n    }\n\n    next(){\n        this.animator.playFrame(false);\n    }\n\n    prev(){\n        this.animator.playFrame(true);\n    }\n\n    setLevel(level){\n        this.animator.switchAnimation(level);\n    }\n    \n    filterHSByPrice(surface) {\n        if(this.animator === undefined) return;\n        this.animator.stop();\n        this.animator.hotspots.setSurfaceFilter(surface);\n    }\n    filterHSByTypes(types) {\n        if(this.animator === undefined) return;\n        this.animator.stop();\n        this.animator.hotspots.setTypesFilter(types);\n    }\n\n    setZoomOptions (opt){\n        this.animator._inputSystem.zoom.setOptions(opt);\n    }\n\n    setZoom(zoomIn) {\n        if(this.animator === undefined) return;\n        this.animator._inputSystem.zoom.setZoom(zoomIn);\n    }\n\n    getParam(param){\n        return APP_DATA.params[param];\n    }\n    getHSParam(param){\n        return APP_DATA.hotspots[param];\n    }\n\n    getCurrentFrame(){\n        if(this.animator === undefined) return;\n        return this.animator._frameIndex;\n    }\n\n    unmountOrbital() {\n        if(this.animator === undefined) return;\n        this.animator.cancel = true;\n    }\n    \n}\n\nexport {Orbital}","class Resizer {\n\n    constructor (canvasObj) {\n\n        this.canvasObj = canvasObj;\n        this.init();\n    }\n\n    init(){\n        this.resize();\n    }\n\n    resize(){\n\n        Object.values(this.canvasObj).forEach((rect) => {\n            rect.width = document.documentElement.clientWidth;\n            rect.height = document.documentElement.clientHeight;\n        });\n\n    }\n}\n\nexport {Resizer}","class TilesController {\n\n    /**\n     * @param {Object} options\n     * some params needed in options\n     * @param {Object} options.breakpoints_sizes - Breakpoints sizes , ex. keys : { small , medium , large}\n     * @param {Number} options.cropSize - the tile size of the splitted image (e.g 512 for 512x512)\n     * @param {Number} options.maxCache - the max cache of tiles\n     *  \n     */\n\n    constructor (options) {\n\n        this.options = options;\n        \n        if(typeof options.breakpoints_sizes === \"undefined\" && typeof options.breakpoints_sizes !== \"object\") {\n            alert(\"breakpoints not valid\")\n            throw new Error(\"breakpoints not valid\");\n        }\n        \n\n        /**\n         * Original images sizes\n         */\n\n        this.naturalSizes = options.breakpoints_sizes;\n\n        /**\n         * the preloaded size by default (this is loaded when the page load)\n         */\n\n        this.preloadedBP = this.naturalSizes.preloaded;\n\n\n        this.cropSize = options.cropSize;\n        this.maxCache = options.maxCache;\n\n\n        /**\n         * the current natural image width ,\n         * when loading tiles we must know the original width of the current breakpoint\n         * we must calculate height based on width with the right aspect ratio\n         */\n        \n        this._currentNaturalWidth = null;\n\n        this._animationIndex = 0;\n        this._currentFrame = 0;\n        this._currentBreakPoint;\n        this._currentScale;\n\n        /** \n         * the cache array , contain lazy-loaded images width additional info\n         * */\n\n        this._cachedFrames = new Array();\n\n        this._useCache = true;\n\n        this._timeOutLoad;\n        this._firstFetch = true;\n\n        this.init();\n    }\n\n    init() {\n\n        this._setLimitCache();\n        // creating sorted breakpoints sizes from min to max\n        this.breakPoints = Object.entries(this.naturalSizes)\n            .sort(([,a],[,b]) => a-b)\n            .reduce((r, [k, v]) => ({ ...r, [k]: v }), {});\n\n       \n    }\n\n\n    _setLimitCache(){\n\n        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\n\n            if(!performance.memory) {\n                \n                this.maxCache = 15;\n                return;\n            }\n\n            if (performance.memory.jsHeapSizeLimit < 500000000) {\n               \n                this.maxCache = 15;\n                return;\n            }\n        }\n    }\n\n    /**\n     * \n     * @param {Number} animationIndex - the animation index \n     * @param {Number} frameIndex - the current frame index \n     * @param {Number} currentWidth - the current image width \n     * @param {Number} scale - the current zoom/scale\n     * @returns resolve with loaded tiles || reject\n     */\n    fetchTiles(animationIndex , frameIndex , currentWidth , scale) {\n        \n        this._setCurrentBP(currentWidth);\n        this._setCurrentNaturalSize(this._currentBreakPoint);\n        \n        if(currentWidth <= this.preloadedBP) return this._loadTiles(true);\n\n        this._animationIndex = animationIndex;\n        this._currentFrame = frameIndex;\n        this._currentScale = scale;\n\n        if(this._firstFetch) {\n            //first fetch\n            console.log(\"first fetch\");\n            this._firstFetch = false;\n            return this._loadTiles();\n        }\n\n        if(this._useCache) {\n            const preloaded = this._cachedFrames.find((v) => {\n                if(\n                    v.animationIndex === this._animationIndex &&\n                    v.frame === this._currentFrame && \n                    v.breakPoint === this._currentBreakPoint\n                ) \n                {\n                    return v;\n                }\n            });\n    \n            if(typeof preloaded !== \"undefined\") {\n                return this._loadExistingTiles(preloaded);\n            }\n        }\n        \n\n        return this._loadTiles();\n        \n    }\n\n\n\n    /**\n     * load tiles from cache\n     * @param {Object} preloaded the cached tiles object if found\n     * @returns the cached canvas containing tiles of the current frame \n     */\n    _loadExistingTiles(preloaded){\n        \n        return new Promise((resolve , reject) => {\n            if(\n                preloaded.animationIndex === this._animationIndex && \n                preloaded.frame === this._currentFrame && \n                preloaded.breakPoint === this._currentBreakPoint\n            )\n            {\n                resolve(preloaded.canvas);\n            }\n            else{\n                reject();\n            }\n        });\n    }\n\n    /**\n     * load tiles of current frame\n     * @param {boolean} error this is helpful for rejecting the promise if frame is changed while loading tiles\n     * @returns the loaded canvas containing tiles of the current frame \n     */\n    _loadTiles(error = false) {\n        window.clearTimeout(this._timeOutLoad);\n        const p = new Promise((resolve , reject ) => {\n            if(error) {\n                reject();\n            }else{\n                this._timeOutLoad = window.setTimeout( () => {\n                    \n                    const animationIndex = this._animationIndex;\n                    const frameIndex = this._currentFrame;\n                    const breakpoint = this._currentBreakPoint;\n                    const scaleFactor = this._currentScale;\n\n                    const folder = this._getTilesFolder(animationIndex , frameIndex , breakpoint);\n\n                    this._createAndLoadTiles(folder,  (WSCanvas) => {\n                        \n                        if(this._useCache) {\n                            const tilesInfo = {\n                                animationIndex : animationIndex,\n                                frame : frameIndex,\n                                breakPoint : breakpoint,\n                                canvas : WSCanvas\n                            };\n        \n                            this._addToCache(tilesInfo);\n                        }\n                        \n    \n                        if(!this._canLoadImg(animationIndex , frameIndex , breakpoint , scaleFactor)) {\n                            reject();\n                        }\n                        resolve(WSCanvas);\n                    });\n                } , 100);\n                \n            }\n            \n        });\n        return p;\n    }\n\n    /**\n     * add loaded tiles if not already exist into the cache \n     * @param {Object} cacheInfo info about the cached canvas \n     */\n    _addToCache(cacheInfo) {\n        \n        if(this._cachedFrames.includes(cacheInfo)) return;\n\n        this._checkCache();\n        this._cachedFrames.push(cacheInfo);\n    }\n    \n\n    /**\n     * load tiles method , this is multi-thread by using the Promise all\n     * @param {String} folder the tiles folder\n     * @param {Function} onFinish calllback when finish loading tiles\n     */\n    _createAndLoadTiles(folder , onFinish) {\n\n        const natWidth = this._currentNaturalWidth;\n        const natHeight = this._calculateWithAspectRatio(natWidth);\n\n        let canvas = document.createElement('canvas');\n        let ctx = canvas.getContext(\"2d\");\n\n        canvas.width = natWidth;\n        canvas.height = natHeight;\n        \n        const cropSize = this.cropSize; // the crop rect size\n        \n        const partsX = Math.floor(natWidth / cropSize);\n        const partsY = Math.floor(natHeight / cropSize);\n\n        const moduloX = natWidth % cropSize;\n        const moduloY = natHeight % cropSize;\n\n        const lengthX = moduloX != 0 ? partsX+1 : partsX;\n        const lengthY = moduloY != 0 ? partsY+1 : partsY;\n\n        let allPromises = new Array();\n        \n        for(let y= 0 ; y < lengthY ; y++) {\n            for(let x = 0 ; x < lengthX ; x++ ) {\n\n                const p = new Promise((resolve , reject) => {\n                    let sx = x*cropSize ,\n                    sy = y*cropSize;\n                    \n                    const index = lengthX * y + x;\n                    const src = `${folder}p-${index}.jpg` ;\n                    const path = require(\"@/\" + src);\n    \n                    let img = new Image();\n                    img.decoding = \"async\";\n                    \n                    img.onload = () => {\n                        ctx.drawImage(img, sx, sy);\n                        img = null;\n                        resolve();\n                        return;\n                    };\n                    img.onerror = () => {\n                        img = null;\n                        reject();\n                    };\n                    img.src = path;\n                });\n\n                allPromises.push(p);\n\n            }\n        }\n\n        Promise.all(allPromises).then(() => {\n            onFinish(canvas);\n            allPromises = null;\n        })\n    }\n\n    /* releaseCanvas(canvas) {\n        canvas.width = 1;\n        canvas.height = 1;\n        const ctx = canvas.getContext('2d');\n        ctx && ctx.clearRect(0, 0, 1, 1);\n    } */\n\n\n    /**\n     * if loaded tiles is the same after the fetch\n     * @param {Number} animationIndex - the animation index when tiles loaded\n     * @param {Number} frame - the frame when tiles loaded\n     * @param {Number} breakPoint \n     * @param {Number} scaleFactor \n     * @returns \n     */\n    _canLoadImg(animationIndex , frame , breakPoint , scaleFactor) {\n\n        if(\n            animationIndex !== this._animationIndex || \n            frame !== this._currentFrame || \n            breakPoint !== this._currentBreakPoint || \n            scaleFactor !== this._currentScale\n        )\n        {\n            return false;\n        }\n        return true;\n    }\n\n    \n    /**\n     * \n     * @param {Context} ctx \n     * @param {HTMLCanvasElement} img \n     * @param {Number} sx - x source coordinate\n     * @param {Number} sy - y source coordinate\n     */\n    _draw(ctx , img , sx , sy) {\n        ctx.clearRect(sx, sy, ctx.canvas.width, ctx.canvas.height);\n        ctx.drawImage(img, sx, sy);\n    }\n\n\n    /**\n     * return the folder path depending on given breakpoint\n     * @param {Number} animationIndex \n     * @param {Number} frameIndex \n     * @param {Number} breakpoint \n     * @returns  tiles folder\n     */\n    _getTilesFolder(animationIndex , frameIndex , breakpoint ){\n\n        let tilesRegPath = this.options.imagesFolder + this.options.tilesFolder;\n        \n        for(const [key , bp] of Object.entries(this.breakPoints)) {\n            if(breakpoint === bp) {\n                const keyPath = this.options.breakpoints_folder[key];\n                tilesRegPath = tilesRegPath\n                    .replace(/%row/g , animationIndex)\n                    .replace(\"%bp\" , keyPath)\n                    .replace(\"%col\" , frameIndex);\n                break;\n            }\n        }\n        return tilesRegPath;\n    }\n\n\n    /**\n     * set the current original size based on the given breakpoint\n     * @param {Number} breakpoint \n     */\n    _setCurrentNaturalSize(breakpoint) {\n\n        for(const [key , bp] of Object.entries(this.breakPoints)) {\n            if(bp === breakpoint) {\n                this._currentNaturalWidth = this.naturalSizes[key];\n                break;\n            }\n        }\n    }\n\n    /**\n     * set current breakpoint based on given width\n     * @param {Number} width \n     */\n    _setCurrentBP(width){\n\n        for(const [key=key , bp] of Object.entries(this.breakPoints)) {\n            if(width <= bp) {\n                this._currentBreakPoint = bp;\n                break;\n            }\n            this._currentBreakPoint = bp;\n        }\n    }\n\n    /**\n     * check if cache is out of max cache , if so then we delete the first element of the cache array\n     */\n    _checkCache(){\n        if(this._cachedFrames.length > this.maxCache) {\n            \n            let removed = this._cachedFrames.shift();\n            removed.canvas = null;\n            removed = null;\n        }\n    }\n\n\n    /**\n     * calculate the height of image based on width preserving the aspect ratio\n     * @param {Number} width \n     * @returns the calculated height\n     */\n    _calculateWithAspectRatio(width) {\n        const aspect = this.options.maxWidth / this.options.maxHeight;\n        const height = width / aspect;\n\n        return height;\n    }\n\n\n    \n}\n\n\nexport {TilesController}","<template>\n    <div class=\"container-fluid card-foot mb-3\">\n\n        <div class=\"row align-items-center\">\n            <div class=\"col\">\n                <span class=\"text-secondary dispo\">Disponibilit</span>\n            </div>\n            <div class=\"col\">\n                <span class=\" text-success\" v-if=\"infoRef.statut == 'Disponible'\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.5em\" height=\"1.5em\" fill=\"currentColor\"\n                        class=\"bi bi-check-lg\" viewBox=\"0 0 16 16\">\n                        <path\n                            d=\"M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z\" />\n                    </svg>\n                </span>\n\n                <span class=\"text-danger\" v-else>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.5em\" height=\"1.5em\" fill=\"currentColor\" class=\"bi bi-x\"\n                        viewBox=\"0 0 16 16\">\n                        <path\n                            d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\" />\n                    </svg>\n                </span>\n            </div>\n        </div>\n\n\n        <div class=\"form-parent d-flex flex-column justify-content-center align-items-center\" v-if=\"isAdmin\">\n            <div class=\"me-3 h-100\" v-if=\"showLoader\">\n                <div class=\"spinner-border text-type-color text-center\" role=\"status\">\n                    <span class=\"visually-hidden\">Loading...</span>\n                </div>\n            </div>\n            <div class=\"col-12 my-2\" v-if=\"!showLoader\">\n                <form action=\"\" @submit.prevent=\"\">\n                    <div class=\"form-check\">\n                        <input class=\"form-check-input\" type=\"radio\" value=\"Disponible\" :name=\"infoRef.statut\"\n                            :id=\"infoRef.nom + '0'\" v-model=\"status\">\n                        <label class=\"form-check-label\" :for=\"infoRef.nom + '0'\">\n                            Disponible\n                        </label>\n                    </div>\n                    <div class=\"form-check\">\n                        <input class=\"form-check-input\" type=\"radio\" value=\"Indisponible\" :name=\"infoRef.statut\"\n                            :id=\"infoRef.nom + '1'\" v-model=\"status\">\n                        <label class=\"form-check-label\" :for=\"infoRef.nom + '1'\">\n                            Indisponible\n                        </label>\n                    </div>\n                </form>\n            </div>\n\n            <div class=\"form-footer w-100 col d-flex justify-content-between align-items-center\" v-if=\"!showLoader\">\n\n                <button class=\"btn btn-success btn-sm\" @click=\"sendEdit(infoRef.nom)\">Edit</button>\n\n\n                <div class=\"msg text-center w-75 p-2\">\n                    <div class=\"alert m-0 p-2\" :class=\"alertStyle\">\n                        {{ alertMsg }}\n                    </div>\n                </div>\n\n            </div>\n        </div>\n\n    </div>\n</template>\n\n\n\n<script setup>\n\nimport { ref, watch, computed } from \"vue\";\n\nimport { useRegionsStore } from \"@/stores/regions\";\nimport { storeToRefs } from 'pinia';\n\nconst regionsStore = useRegionsStore();\nconst { regions, isError } = storeToRefs(regionsStore);\n\n\nconst props = defineProps({\n    cardInfo: Object,\n    colorType: String,\n    isAdmin: {\n        type: Boolean,\n        default: false\n    }\n});\n\nconst infoRef = ref(props.cardInfo);\n\nconst status = ref(infoRef.value.statut);\nlet lastStatus = status.value;\n\nconst showLoader = ref(false);\nconst alertMsg = ref(infoRef.value.statut);\nconst isReqError = ref(false);\nconst alertStyle = computed(() => (\n    {\n        'alert-success': infoRef.value.statut === \"Disponible\" && !isReqError.value,\n        'alert-danger': infoRef.value.statut !== \"Disponible\" && !isReqError.value,\n        'alert-warning': isReqError.value,\n    }\n));\n\n\nfunction sendEdit(id) {\n\n    if (lastStatus === status.value) return;\n    showLoader.value = true;\n    alertMsg.value = 'Loading';\n    regionsStore.editStatus(id, status.value).then(msg => {\n        if (isError.value) {\n            showLoader.value = false;\n            isReqError.value = true;\n            alertMsg.value = msg;\n            window.setTimeout(() => {\n                const stat = infoRef.value.statut;\n                isReqError.value = false;\n                alertMsg.value = stat;\n                lastStatus = alertMsg.value = status.value = stat;\n            }, 1000);\n            return;\n        }\n\n        infoRef.value = regions.value[id];\n        lastStatus = status.value = infoRef.value.statut;\n        isReqError.value = false;\n        showLoader.value = false;\n        alertMsg.value = msg;\n\n        window.setTimeout(() => {\n            alertMsg.value = infoRef.value.statut;\n        }, 1000);\n    });\n}\n\n\n\nwatch(() => props.cardInfo, () => {\n    infoRef.value = props.cardInfo;\n    lastStatus = status.value = infoRef.value.statut;\n});\n\n\n</script>\n\n\n\n<style lang=\"scss\" scoped>\n.text-type-color {\n    color: v-bind(colorType);\n}\n\n.dispo {\n    font-size: .9em;\n}\n\n.form-parent {\n    min-height: 8em;\n}\n\ninput,\nlabel {\n    cursor: pointer;\n}\n\nlabel {\n    font-size: .8em;\n    font-weight: bold;\n    color: #6a6a6a;\n}\n\n.form-footer {\n    height: 4em;\n\n    .msg {\n        font-size: .9em;\n    }\n}\n</style>","import script from \"./EditAppt.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EditAppt.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./EditAppt.vue?vue&type=style&index=0&id=131a944d&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-131a944d\"]])\n\nexport default __exports__","<template>\n    <div class=\"alert text-center\" :class=\"classAlert\" role=\"alert\" v-if=\"message !== ''\">\n        {{ message }}\n    </div>\n</template>\n\n\n<script setup>\n\nimport { reactive, watchEffect } from \"vue\";\n\nconst props = defineProps({\n    message: {\n        type: String,\n        default: \"\"\n    },\n\n    isSuccess: {\n        type: Boolean,\n        default: true\n    }\n});\n\n\nconst classAlert = reactive({\n    \"alert-danger\": !props.isSuccess,\n    \"alert-success\": props.isSuccess,\n});\n\nwatchEffect(() => {\n    const success = props.isSuccess;\n    classAlert[\"alert-danger\"] = !success;\n    classAlert[\"alert-success\"] = success;\n});\n\n</script>","import script from \"./AlertComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AlertComponent.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n    <div>\n        <Teleport to=\"body\">\n            <!-- Modal -->\n            <div class=\"modal fade\" id=\"capture-modal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\"\n                ref=\"capture\">\n                <div class=\"modal-dialog modal-dialog-centered\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <h1 class=\"modal-title lead fs-6\" id=\"exampleModalLabel\">Screenshot</h1>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                        </div>\n                        <div class=\"modal-body\">\n\n                            <div class=\"d-flex justify-content-center align-items-center loader\" v-if=\"isLoading\">\n                                <div class=\"spinner-border\" role=\"status\">\n                                    <span class=\"visually-hidden\">Loading...</span>\n                                </div>\n                            </div>\n\n                            <h3 class=\"text-danger text-center fs-6 p-3\" v-if=\"errorCapture\">\n                                Une erreur s'est produite lors de la capture !\n                            </h3>\n\n                            <img :src=\"currentImage\" class=\"img-fluid\" alt=\"\" loading=\"lazy\" v-else />\n\n                        </div>\n                        <div class=\"modal-footer\">\n\n                            <div class=\"d-flex\">\n                                <input class=\"form-control form-control-sm mx-3\" id=\"filename\" type=\"text\"\n                                    placeholder=\"Nom du fichier\" aria-label=\".form-control-sm name\" v-model=\"fileName\"\n                                    required :disabled=\"isLoading || errorCapture\">\n\n                                <button type=\"button\" class=\"btn btn-primary\" :disabled=\"isLoading || errorCapture\"\n                                    @click=\"download\">Telecharger</button>\n                                <a :href=\"captureLink\" :download=\"imgName\" v-show=\"false\" ref=\"downloadLink\">Telecharger</a>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </Teleport>\n\n    </div>\n</template>\n\n\n<script setup>\n\nimport { ref, watch, computed, onMounted, onUnmounted } from \"vue\";\nimport { Modal } from \"bootstrap\";\n\nimport { useCaptureStore } from \"@/stores/capture\";\nimport { storeToRefs } from \"pinia\";\n\nconst caprureStore = useCaptureStore();\nconst { isLoading, isOpenModal, currentImage, captureLink, errorCapture } = storeToRefs(caprureStore);\n\n\nconst fileName = ref(\"\");\nconst capture = ref(null);\nconst modal = ref(undefined);\nconst downloadLink = ref(null);\n\nconst imgName = computed(() => {\n    return (fileName.value !== '') ? `${fileName.value}.jpg` : 'Screenshot.jpg';\n});\n\nonMounted(() => {\n    modal.value = new Modal(capture.value);\n    capture.value.addEventListener(\"hidden.bs.modal\", () => {\n        isOpenModal.value = false;\n        fileName.value = \"\";\n    })\n});\n\nonUnmounted(() => {\n    modal.value.dispose();\n});\n\n\nwatch(isOpenModal, () => {\n    if (isOpenModal.value)\n        modal.value.show();\n});\n\nconst download = () => {\n    downloadLink.value.click();\n}\n\n\n</script>\n\n\n<style lang=\"scss\" scoped>\n.loader {\n    width: 5em;\n    min-height: 15em;\n    margin: auto;\n\n    .spinner-border {\n        width: 3em;\n        height: 3em;\n    }\n}\n</style>","import script from \"./CaptureModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CaptureModal.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CaptureModal.vue?vue&type=style&index=0&id=1c5dd331&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1c5dd331\"]])\n\nexport default __exports__","<template>\n    <div class=\"container-fluid\">\n        <div class=\"row align-items-center position-relative\">\n            <div class=\"col\">\n                <div id=\"carousel-template\" class=\"carousel carousel-dark slide\" data-bs-touch=\"false\" ref=\"carouselElem\">\n\n                    <div class=\"carousel-inner d-flex align-items-center\">\n                        <div class=\"carousel-item\" v-for=\"(item, index) in itemsData\" :key=\"index\"\n                            :class=\"{ 'active': (index == 0) }\">\n                            <ImageComponent :src=\"item.url\" class=\"d-block w-100\" />\n                            <div class=\"carousel-caption d-block d-md-block\">\n                                <h5 class=\"p-0 m-0\">{{ item.title }}</h5>\n                                <p class=\"p-0 m-0\">{{ item.desc }}</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"carousel-indicators\">\n                        <button v-for=\"(item, index) in itemsData\" :key=\"index\" type=\"button\"\n                            data-bs-target=\"#carousel-template\" :data-bs-slide-to=index :class=\"{ 'active': (index == 0) }\"\n                            aria-current=\"true\" aria-label=\"Slide {{index}}\">\n                        </button>\n                    </div>\n\n                    <button class=\"carousel-control-prev\" type=\"button\" data-bs-target=\"#carousel-template\"\n                        data-bs-slide=\"prev\">\n                        <span class=\"\" aria-hidden=\"true\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.6em\" height=\"1.6em\" fill=\"currentColor\"\n                                class=\"bi bi-chevron-left\" viewBox=\"0 0 16 16\">\n                                <path fill-rule=\"evenodd\"\n                                    d=\"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z\" />\n                            </svg>\n                        </span>\n                        <span class=\"visually-hidden\">Previous</span>\n                    </button>\n\n                    <button class=\"carousel-control-next\" type=\"button\" data-bs-target=\"#carousel-template\"\n                        data-bs-slide=\"next\">\n                        <span class=\"\" aria-hidden=\"true\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.6em\" height=\"1.6em\" fill=\"currentColor\"\n                                class=\"bi bi-chevron-right\" viewBox=\"0 0 16 16\">\n                                <path fill-rule=\"evenodd\"\n                                    d=\"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z\" />\n                            </svg>\n                        </span>\n                        <span class=\"visually-hidden\">Next</span>\n                    </button>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</template>\n\n\n\n<script setup>\n\nimport { Carousel } from \"bootstrap\";\nimport ImageComponent from \"./ImageComponent\";\nimport { ref, onMounted } from \"vue\";\n\n\n\ndefineProps({\n    itemsData: Object,\n    colorType: {\n        type: String,\n        default: \"#000\"\n    }\n});\n\nconst carouselElem = ref(null);\n\nonMounted(() => {\n    new Carousel(carouselElem.value)\n});\n\n\n</script>\n\n\n\n\n<style lang=\"scss\" scoped>\n.row {\n    min-height: 90vh;\n}\n\n.carousel {\n\n    $color-type : v-bind(colorType);\n    $ind-bg : rgb(173, 173, 173);\n    $ind-size : 1em;\n    $ind-small-size : .5em;\n\n    position: initial;\n\n    .carousel-inner {\n        min-height: 200px;\n        min-height: 50vh;\n    }\n\n    .carousel-indicators {\n\n\n        @mixin type-styles {\n            border-color: $color-type;\n\n            &::after {\n                background-color: $color-type;\n            }\n        }\n\n        button {\n            position: relative;\n            width: $ind-size;\n            height: $ind-size;\n            background-color: transparent;\n            border: .1em solid $ind-bg;\n            border-radius: 50%;\n            margin: 0 .6em;\n            opacity: 1;\n\n            &::after {\n                content: '';\n                position: absolute;\n                left: 50%;\n                top: 50%;\n                transform: translate(-50%, -50%);\n                width: $ind-small-size;\n                height: $ind-small-size;\n                background-color: $ind-bg;\n                border-radius: 50%;\n            }\n\n            &.active {\n                @include type-styles;\n                cursor: auto;\n\n            }\n\n            &:not(.active):hover {\n                @include type-styles;\n            }\n        }\n    }\n\n    .carousel-control-prev,\n    .carousel-control-next {\n        width: 3em;\n        height: 3em;\n        top: 50%;\n        transform: translateY(-50%);\n        color: black;\n\n        &:hover {\n            color: $color-type;\n        }\n    }\n\n    .carousel-item {\n        img {\n            max-height: 80vh;\n\n        }\n    }\n\n    .carousel-caption {\n        width: 20%;\n        bottom: 0;\n        left: 0;\n        padding: 0;\n\n        h5 {\n            color: $color-type;\n            font-weight: bold;\n        }\n\n    }\n}\n</style>","import script from \"./CarouselComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CarouselComponent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CarouselComponent.vue?vue&type=style&index=0&id=50a58c0a&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-50a58c0a\"]])\n\nexport default __exports__","<template>\n    <div class=\"loader w-100 text-center\" v-if=\"isLoading\">\n        <div class=\"spinner-border\" role=\"status\">\n            <span class=\"visually-hidden\">Loading...</span>\n        </div>\n    </div>\n    <img v-else :src=\"sourceImg\" :srcset=\"srcSets\" :sizes=\"sizes\" class=\"img-fluid\" alt=\"\" loading=\"lazy\">\n</template>\n\n\n<script setup>\n\nimport { useImage } from '@vueuse/core';\nimport { reactive, computed } from \"vue\";\n\nconst props = defineProps({\n    src: {\n        type: String,\n        default: \"\"\n    },\n});\n\n\n//const defaultImage = \"https://via.placeholder.com/512x256.png/fff/ccc?text=Image not found\";\nconst defaultImage = require(\"@/assets/images/lots/3d/appt2_0_bloc22.jpg\");\n\nconst defaultBreakPoints = reactive({\n    \"small\": 1000,\n    \"medium\": 2000,\n    \"large\": 3000,\n    \"x-large\": 4000,\n});\n\nconst sizes = computed(() => {\n    let sizesAttr = \"\";\n    Object.values(defaultBreakPoints).forEach(function (v) {\n        sizesAttr += `(max-width: ${v}px) ${v}px, `;\n    });\n    return (srcSets.value !== \"\") ? sizesAttr : \"\";\n});\n\nconst srcSets = computed(() => {\n    const source = props.src;\n    const splited = source.split('/');\n    const name = splited[splited.length - 1];\n    const baseString = splited.splice(0, splited.length - 1).join('/');\n\n    let p = \"\";\n    Object.entries(defaultBreakPoints).forEach(function ([k, v]) {\n        const path = `${baseString}/${k}/${name}`;\n\n        let set = getSrcsetPath(path);\n        set = (set !== '') ? set + ` ${v}w, ` : '';\n        p += set;\n    });\n\n    const smallBp = defaultBreakPoints.small;\n    const smallPath = source;\n\n    let smallSet = getSrcsetPath(smallPath);\n\n    smallSet = (smallSet !== '') ? `${smallSet} ${smallBp}w, ` : '';\n\n    const srcSet = `${smallSet} ${p}`;\n    return (p !== \"\") ? srcSet : \"\";\n});\n\nconst sourceImg = computed(() => {\n    const source = props.src;\n    return getImagePath(source);\n});\n\nconst { isLoading } = useImage({ src: sourceImg.value });\n\n\n\n\nfunction getImagePath(path) {\n    let src = \"\";\n    try {\n        src = require(`@/${path}`);\n    } catch (error) {\n        src = defaultImage;\n    }\n    return src;\n}\n\nfunction getSrcsetPath(path) {\n    let src = \"\";\n    try {\n        src = require(`@/${path}`);\n    } catch (error) {\n        src = \"\";\n    }\n    return src;\n}\n\n\n</script>\n\n<style lang=\"scss\" scoped>\n.spinner-border {\n    width: 3em;\n    height: 3em;\n}\n\nimg {\n    width: auto !important;\n    object-fit: contain;\n    margin: auto;\n}\n</style>","import script from \"./ImageComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ImageComponent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ImageComponent.vue?vue&type=style&index=0&id=b6a61bb8&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b6a61bb8\"]])\n\nexport default __exports__","<template>\n    <div class=\"compass shadow\">\n        <div class=\"compass-inner\">\n            <div class=\"main-arrow\" ref=\"mainArrow\">\n                <div class=\"arrow-up\"></div>\n                <div class=\"arrow-down\"></div>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script setup>\n\nimport { gsap } from \"gsap\";\nimport { ref } from \"vue\";\n\n\nconst mainArrow = ref(null);\n\nfunction rotate(deg) {\n    gsap.to(mainArrow.value, {\n        rotate: deg + '_short', //_short for reversing rotation when its about 360 to 0\n        duration: 0.3,\n        overwrite: true\n    })\n}\n\ndefineExpose({\n    rotate\n});\n\n\n\n</script>\n\n\n\n<style lang=\"scss\" scoped>\n$size-compass : 6em;\n$size-compass-inner : 5em;\n$arrow-height : 2em;\n\n\n\n.compass {\n    position: absolute;\n    right: 2em;\n    top: 4em;\n    z-index: 5;\n\n    width: $size-compass;\n    height: $size-compass;\n    background-color: #F3F3F3;\n    border-radius: 100%;\n    background-image: -webkit-linear-gradient(top, #F7F7F7, #ECECEC);\n}\n\n.compass-inner {\n    width: $size-compass-inner;\n    height: $size-compass-inner;\n    background-color: #3D3D3D;\n    border-radius: 100%;\n    position: relative;\n    transform: translate(-50%, -50%);\n    left: 50%;\n    top: 50%;\n    border: .2em inset #C5C5C5;\n}\n\n.main-arrow {\n    height: auto;\n    width: 10px;\n    left: 45%;\n    top: 5%;\n    position: relative;\n    padding-top: 0;\n    box-sizing: border-box;\n\n}\n\n.arrow-up {\n    width: 0;\n    height: 0;\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n    border-bottom: $arrow-height solid #EF5052;\n    position: relative;\n}\n\n.arrow-down {\n    width: 0;\n    transform: rotate(180deg);\n    height: 0;\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n    border-bottom: $arrow-height solid #F3F3F3;\n    position: relative;\n}\n</style>","import script from \"./CompassComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CompassComponent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CompassComponent.vue?vue&type=style&index=0&id=044c750a&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-044c750a\"]])\n\nexport default __exports__","<template>\n    <div class=\"filter position-fixed p-0\" :style=\"style\" ref=\"filterParent\">\n        <div class=\"d-flex justify-content-center\">\n\n            <div id=\"filter\" class=\"toast\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-autohide=\"false\"\n                ref=\"filter\">\n                <div class=\"toast-header bg-dark text-white\" ref=\"draggableCapture\">\n                    <strong class=\"me-auto\">Filtrage de Lot</strong>\n                    <button type=\"button\" class=\"btn-close btn-close-white\" @click=\"closeToast\"></button>\n                </div>\n                <div class=\"toast-body\">\n\n                    <slider-filter @onSurfaceChanged=\"surfaceChanged\" :min=\"surfaceMinMax.min\" :max=\"surfaceMinMax.max\"\n                        :step=\"0.1\" :gap=\"2\" :slider-delay=\"300\">\n                    </slider-filter>\n\n                    <hr />\n\n                    <types-filter :default-types=\"checkedTypes\" @onTypesChanged=\"typesChanged\"></types-filter>\n\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script setup>\n\nimport { Toast } from \"bootstrap\";\n\nimport SliderFilter from \"@/components/orbital/search/SliderFilter\";\nimport TypesFilter from \"@/components/orbital/search/TypesFilter\";\n\nimport { onClickOutside, useDraggable } from '@vueuse/core'\n\nimport { ref, reactive, watch, onMounted, onUnmounted } from \"vue\";\n\nimport { useRegionsStore } from \"@/stores/regions\";\nimport { useAppDataStore } from \"@/stores/appData\";\n\nimport { storeToRefs } from 'pinia';\n\nconst regionsStore = useRegionsStore();\nconst appDataStore = useAppDataStore();\n\nconst emits = defineEmits([\n    \"onCloseToast\",\n    \"onSurfaceChanged\",\n    \"onTypesChanged\"\n]);\n\n\nconst props = defineProps(\n    {\n        showToast: {\n            type: Boolean,\n            default: true\n        },\n    }\n);\n\n\nconst filterParent = ref(null);\nconst filter = ref(null);\nconst draggableCapture = ref(null);\n\nconst { defaultFilters } = storeToRefs(regionsStore);\nconst { surfaceMinMax } = storeToRefs(appDataStore);\nconst checkedTypes = ref(defaultFilters.value.types);\n\nlet toast = null;\nconst appReady = ref(false);\nconst surface = reactive({\n    min: surfaceMinMax.value.min,\n    max: surfaceMinMax.value.max\n});\n\n\nconst { style, position } = useDraggable(filterParent, {\n    exact: false,\n    handle: draggableCapture,\n    pointerTypes: ['mouse', 'touch', 'pen'],\n    onMove: (pos) => {\n        const elem = filterParent.value;\n        const elemWidth = elem.offsetWidth;\n        const elemHeight = elem.offsetHeight;\n        const windowWidth = window.innerWidth;\n        const windowHeight = window.innerHeight;\n\n        if (pos.x < 0) {\n            position.value.x = 0;\n        }\n        if (pos.x > (windowWidth - elemWidth)) {\n            position.value.x = windowWidth - elemWidth;\n        }\n\n        if (pos.y < 0) {\n            position.value.y = 0;\n        }\n\n        if (pos.y > (windowHeight - elemHeight)) {\n            position.value.y = windowHeight - elemHeight;\n        }\n    }\n});\n\n\nonClickOutside(filterParent, () => {\n    closeToast();\n});\n\n\n\n\nfunction initToast() {\n    toast = new Toast(filter.value);\n    toast.show(); //showing the toast before hidding it to get his size\n    toogleToast();\n}\nfunction toogleToast() {\n    if (props.showToast) {\n        toast.show();\n    } else {\n        toast.hide();\n    }\n}\n\nfunction closeToast() {\n    emits(\"onCloseToast\");\n}\n\n\nfunction surfaceChanged(sur = surface) {\n\n    if (appReady.value) {\n        surface.min = sur.min;\n        surface.max = sur.max;\n        emits(\"onSurfaceChanged\", surface);\n    }\n}\n\nfunction typesChanged(types = defaultFilters.value.types) {\n    if (appReady.value) {\n        checkedTypes.value = types;\n        emits(\"onTypesChanged\", checkedTypes.value);\n    }\n}\n\nfunction _appReady() {\n    appReady.value = true;\n    surfaceChanged();\n    typesChanged();\n}\n\n\nwatch(() => props.showToast, () => {\n    toogleToast();\n});\n\n\n\nonMounted(() => {\n    initToast();\n    position.value.x = (window.innerWidth * 0.5) - (filterParent.value.offsetWidth * 0.5);\n    position.value.y = (window.innerHeight * 0.5) - (filterParent.value.offsetHeight * 0.5);\n\n    window.addEventListener(\"OnAppReady\", _appReady);\n});\n\nonUnmounted(() => {\n    window.removeEventListener(\"OnAppReady\", _appReady);\n});\n\n</script>\n\n\n\n<style lang=\"scss\" scoped>\n.filter {\n    z-index: 1030;\n    width: auto;\n    user-select: none;\n\n    .toast {\n        width: 25em;\n\n        .toast-header {\n            letter-spacing: .13em;\n            font-size: .9em;\n            font-weight: 500;\n\n            &:hover {\n                cursor: move;\n            }\n        }\n\n    }\n}\n</style>","import script from \"./FilterComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FilterComponent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FilterComponent.vue?vue&type=style&index=0&id=14e864da&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-14e864da\"]])\n\nexport default __exports__","<template>\n    <Transition @enter=\"onEnter\" @leave=\"onLeave\" :css=\"false\">\n\n        <div class=\"parent-hs-more container-fluid\" v-show=\"canShow\" ref=\"hsDetailParent\">\n\n            <div class=\"close-detail\">\n                <button class=\"btn custom-btn btn-sm btn-style\" @click=\"$emit('onCloseDetails')\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"2.5em\" height=\"2.5em\" fill=\"currentColor\"\n                        class=\"bi bi-backspace\" viewBox=\"0 0 16 16\">\n                        <path\n                            d=\"M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z\" />\n                        <path\n                            d=\"M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-7.08z\" />\n                    </svg>\n                </button>\n\n            </div>\n\n            <div class=\"more-container row align-items-center\" ref=\"screenshot\">\n                <div class=\"hs-more-carousel hs-more p-3 col-lg-9\">\n                    <CarouselComponent :items-data=\"items\" :color-type=\"currentColor\"></CarouselComponent>\n                </div>\n\n                <div\n                    class=\"hs-more-infos hs-more col-lg-3 text-center d-flex flex-column justify-content-center justify-content-lg-start align-items-center shadow-sm\">\n\n                    <div class=\"more-head w-100 mb-3\">\n                        <div class=\"row\">\n                            <div class=\"col-12 color-type\"></div>\n                        </div>\n                        <div class=\"row align-items-center bg-dark text-white py-3 text-uppercase\">\n                            <div class=\"col-5 p-0\">\n                                <p class=\"p-0 m-0\">Appt-{{ appt }}</p>\n                            </div>\n                            <div class=\"col-2\">\n                                <div class=\"vr\"></div>\n                            </div>\n                            <div class=\"col-5 p-0\">\n                                <p class=\"p-0  m-0\">Bloc-{{ bloc }}</p>\n                            </div>\n                        </div>\n                    </div>\n\n\n                    <div class=\"container-fluid mb-3\">\n\n                        <div class=\"infos-list row align-items-center my-3\" v-for=\"(body, title, index) in body__infos\"\n                            :key=\"index\">\n                            <div class=\"col-sm-4 text-start content-title p-1\">\n                                <span class=\"\">{{ title }}</span>\n                            </div>\n\n                            <div class=\"col-sm-8 bg-white content-value\">\n                                <span>{{ body }}</span>\n                            </div>\n                        </div>\n\n                    </div>\n\n                    <hr class=\"my-3\" /><!----------------------------->\n\n                    <div class=\"container-fluid\">\n                        <div class=\"row-dispo row align-items-center p-1 my-4\">\n\n                            <div class=\"col-12\">\n                                <h3 class=\"fs-6 fw-bold text-secondary\">{{ currentRegion.statut }}</h3>\n                            </div>\n\n                            <div class=\"col-12\">\n                                <p class=\"dispo p-2 m-0\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"2em\" height=\"2em\" fill=\"currentColor\"\n                                        class=\"bi bi-check-circle text-success\" viewBox=\"0 0 16 16\"\n                                        v-if=\"currentRegion.statut === 'Disponible'\">\n                                        <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\" />\n                                        <path\n                                            d=\"M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z\" />\n                                    </svg>\n\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"2em\" height=\"2em\" fill=\"currentColor\"\n                                        class=\"bi bi-x-circle text-danger\" viewBox=\"0 0 16 16\" v-else>\n                                        <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\" />\n                                        <path\n                                            d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\" />\n                                    </svg>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <hr class=\"my-3 flex-grow-1\" /><!----------------------------->\n\n                    <div class=\"more-footer mb-3\">\n                        <button class=\"btn custom-btn btn-sm btn-style\" type=\"button\"\n                            @click=\"captureStore.takeScreen(screenshot)\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"2.5em\" height=\"2.5em\" fill=\"currentColor\"\n                                class=\"bi bi-camera\" viewBox=\"0 0 16 16\">\n                                <path\n                                    d=\"M15 12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.172a3 3 0 0 0 2.12-.879l.83-.828A1 1 0 0 1 6.827 3h2.344a1 1 0 0 1 .707.293l.828.828A3 3 0 0 0 12.828 5H14a1 1 0 0 1 1 1v6zM2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2z\" />\n                                <path\n                                    d=\"M8 11a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zm0 1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zM3 6.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z\" />\n                            </svg>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </Transition>\n</template>\n\n\n<script setup>\n\nimport { ref } from 'vue'\nimport CarouselComponent from \"../app-ui/CarouselComponent\"\nimport { transitionEnter, transitionLeave } from \"@/utils/hsDetailsTransition\";\nimport { useRegionsStore } from \"@/stores/regions\";\nimport { useCaptureStore } from \"@/stores/capture\";\nimport { storeToRefs } from 'pinia';\n\n\ndefineEmits([\n    'onCloseDetails'\n])\n\ndefineProps({\n    canShow: {\n        type: Boolean,\n        default: true\n    },\n});\n\n\nconst regionsStore = useRegionsStore();\nconst captureStore = useCaptureStore();\n\nconst { currentColor, currentRegion, body__infos, appt, bloc } = storeToRefs(regionsStore);\n\n\nconst screenshot = ref(null);\n\nconst items = ref([\n    {\n        url: \"\",\n        title: \"Plan 3D\",\n        desc: \"\"\n    },\n    {\n        url: \"\",\n        title: \"Plan 2d\",\n        desc: \"\"\n    }\n]);\n\n\nconst setImageSrc = () => {\n    const apptName = currentRegion.value.nom;\n    items.value[0].url = `assets/images/lots/3d/${apptName}.jpg`;\n    items.value[1].url = `assets/images/lots/2d/${apptName}.jpg`;\n};\n\nfunction onEnter(el) {\n    transitionEnter(el);\n}\n\nfunction onLeave(el, done) {\n    transitionLeave(el, done);\n}\n\ndefineExpose({\n    setImageSrc\n});\n\n</script>\n\n\n\n<style lang=\"scss\" scoped>\n$type-color : v-bind(currentColor);\n$brightness : 0.9;\n\n@mixin type-color {\n    color: $type-color;\n    filter: brightness($brightness);\n}\n\n@mixin type-bg-color {\n    background-color: $type-color;\n    filter: brightness($brightness);\n}\n\nhr {\n    width: 80%;\n    color: #828282;\n    margin: 0;\n}\n\n.parent-hs-more {\n    position: absolute;\n    z-index: 1031;\n    background-color: #fff;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n\n\n    .btn-style {\n        background-color: transparent;\n        color: #000;\n        padding: 0;\n        margin: 0 .5em;\n    }\n\n    .btn-style:hover {\n        @include type-color;\n    }\n\n    .close-detail {\n        position: absolute;\n        left: 1em;\n        top: 1em;\n        z-index: 1032;\n\n        svg {\n            display: block;\n        }\n    }\n\n    .more-container {\n        min-height: 100%;\n        min-height: 100vh;\n    }\n\n    .hs-more {\n        min-height: 100%;\n        min-height: 100vh;\n    }\n\n    .hs-more-carousel {\n        background-color: #fff;\n    }\n\n    .hs-more-infos {\n\n        background-color: #e6e6e6;\n\n        .more-head {\n            letter-spacing: .1em;\n        }\n\n        .color-type {\n            height: 1em;\n            @include type-bg-color;\n        }\n\n        .content-title {\n\n            span {\n                color: #6a6a6a;\n            }\n\n        }\n\n        .content-value {\n\n            span {\n                font-size: .9em;\n                font-weight: bold;\n                @include type-color;\n            }\n\n        }\n\n        .dispo {\n            color: #089d00;\n        }\n\n    }\n}\n</style>","import script from \"./HotspotDetails.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HotspotDetails.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HotspotDetails.vue?vue&type=style&index=0&id=00ef6762&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-00ef6762\"]])\n\nexport default __exports__","import script from \"./LoaderComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LoaderComponent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LoaderComponent.vue?vue&type=style&index=0&id=ef04058e&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ef04058e\"]])\n\nexport default __exports__","<template>\n    <div class=\"parent position-relative h-100 p-0 m-0 border border-0\">\n\n        <capture-modal />\n\n        <LoaderComponent :is-error=\"orbitalError\" :show=\"showLoader\" :percent-loaded=\"percentLoaded\" @on-refresh=\"refresh\">\n        </LoaderComponent>\n\n        <HotspotDetails :canShow=\"showHsDetails\" @onCloseDetails=\"showHsDetails = false\" ref=\"detailsComponent\">\n        </HotspotDetails>\n\n        <OrbitalMenu :stage-count=\"stageCount\" :starting-at=\"startStage\" @on-play=\"play\" @on-step=\"step\"\n            @on-step-end=\"endTimout\" @on-set-level=\"setLevel\" @on-show-filter=\"showFilter\" @on-zoom=\"setZoom\"\n            @on-zoom-end=\"endTimout\">\n        </OrbitalMenu>\n\n        <div class=\"orbital-canvas p-0 m-0 border border-0 h-100 position-relative\" id=\"orbital\" ref=\"screenshot\">\n            <compass-component ref=\"compass\"></compass-component>\n            <PopoverComponent :show-popover=\"showPopper\" :positions=\"popoverPos\"></PopoverComponent>\n        </div>\n\n        <FilterComponent :default-filters=\"default_filters\" :show-toast=\"showToast\" @onCloseToast=\"closeFilter\"\n            @onSurfaceChanged=\"surfaceChanged\" @onTypesChanged=\"typesChanged\">\n        </FilterComponent>\n\n        <div class=\"s-f-menu d-flex\">\n            <button class=\"btn custom-btn btn-sm btn-style fullscreen-btn\" type=\"button\" @click=\"toggle\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\"\n                    class=\"bi bi-arrows-fullscreen\" viewBox=\"0 0 16 16\">\n                    <path fill-rule=\"evenodd\"\n                        d=\"M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707zm0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707zm-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707z\" />\n                </svg>\n            </button>\n\n            <button class=\"btn custom-btn btn-sm btn-style capture-btn\" type=\"button\"\n                @click=\"captureStore.takeScreen(screenshot)\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.5em\" height=\"1.5em\" fill=\"currentColor\"\n                    class=\"bi bi-camera\" viewBox=\"0 0 16 16\">\n                    <path\n                        d=\"M15 12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.172a3 3 0 0 0 2.12-.879l.83-.828A1 1 0 0 1 6.827 3h2.344a1 1 0 0 1 .707.293l.828.828A3 3 0 0 0 12.828 5H14a1 1 0 0 1 1 1v6zM2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2z\" />\n                    <path\n                        d=\"M8 11a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zm0 1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zM3 6.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z\" />\n                </svg>\n            </button>\n        </div>\n\n\n\n    </div>\n</template>\n\n\n\n<script setup>\n\n\n\nimport { Orbital } from \"@/canvas-modules/orbital\";\n\nimport CaptureModal from \"@/components/app-ui/CaptureModal.vue\";\nimport CompassComponent from \"./CompassComponent\";\nimport FilterComponent from \"./FilterComponent\";\nimport HotspotDetails from \"./HotspotDetails\";\nimport LoaderComponent from \"./LoaderComponent\";\nimport OrbitalMenu from \"./OrbitalMenu\";\nimport PopoverComponent from \"./PopoverComponent\";\n\nimport { useFullscreen } from '@vueuse/core';\nimport { ref, reactive, computed, onMounted, onUnmounted } from \"vue\";\nimport { storeToRefs } from \"pinia\";\nimport { useRegionsStore } from \"@/stores/regions\";\nimport { useCaptureStore } from \"@/stores/capture\";\n\n\n\nconst { toggle } = useFullscreen();\n\nconst captureStore = useCaptureStore();\n\nconst regionsStore = useRegionsStore();\nconst { regions, colorTypes, default_filters, orbitalParams, firstFetch, isError } = storeToRefs(regionsStore);\n\nconst screenshot = ref(null), detailsComponent = ref(null);\n\nconst showLoader = ref(true);\n\nconst showToast = ref(false);\n\nconst showPopper = ref(false), popoverPos = reactive({ x: 0, y: 0 });\n\nconst orbitalError = ref(false);\nlet orbital = null;\nconst showHsDetails = ref(false),\n    hsData = ref({}),\n    stageCount = ref(1),\n    typesColors = ref({}),\n    currentColor = ref(\"#cccccc\"),\n    percentLoaded = ref(0),\n    startingStage = ref(0);\nconst startStage = computed(() => {\n    return Math.min(Math.max(parseInt(startingStage.value), 0), stageCount.value - 1);\n});\n\nconst MenuBtnInterval = ref(undefined);\n\nconst compass = ref(null);\nconst angle = ref(0);\nconst northAngle = ref(orbitalParams.value.northAngle);\n\n\n/***********************************\n  Initialisation\n***********************************/\nfunction loadRegionsInfo() {\n\n    if (!firstFetch.value) return init();\n\n    regionsStore.fetchRegions().then((err) => {\n        if (isError.value) {\n            console.log(err);\n            orbitalError.value = true;\n            return;\n        }\n        init();\n    });\n\n}\n\nfunction init() {\n    orbital = new Orbital(\"orbital\", regions.value);\n    orbital.init();\n\n    stageCount.value = orbitalParams.value.animationsCount;\n    startingStage.value = orbitalParams.value.animStart;\n    typesColors.value = colorTypes.value;\n\n    addEvents();\n}\n/***********************************\n  END Initialisation\n***********************************/\n\n\n\n\n/***********************************\n  Inner functions\n***********************************/\nfunction setLevel(level) {\n    orbital.setLevel(level);\n}\n\nfunction play(play) {\n    if (play) {\n        return orbital.playOrbital();\n    }\n    orbital.stopOrbital();\n}\n\nfunction step(reverse) {\n    window.clearInterval(MenuBtnInterval.value);\n    if (reverse)\n        orbital.prev();\n    else orbital.next();\n    _rotateCompass();\n\n    MenuBtnInterval.value = window.setInterval(() => {\n        if (reverse)\n            orbital.prev();\n        else orbital.next();\n        _rotateCompass();\n    }, 100);\n}\n\nfunction _setOrbitalAngle() {\n    const totalFrames = orbitalParams.value.framesCount;\n    angle.value = Math.round(360 / totalFrames);\n}\n\nfunction _rotateCompass() {\n    const frame = orbital.getCurrentFrame();\n    const a = northAngle.value + angle.value * frame;\n    compass.value.rotate(a);\n}\n\nfunction setZoom(zoomIn) {\n    window.clearInterval(MenuBtnInterval.value);\n    orbital.setZoom(zoomIn);\n    MenuBtnInterval.value = window.setInterval(() => orbital.setZoom(zoomIn), 30);\n}\nfunction endTimout() {\n    window.clearInterval(MenuBtnInterval.value);\n}\nfunction showFilter() {\n    showToast.value = true;\n}\n\nfunction closeFilter() {\n    showToast.value = false;\n}\n\nfunction surfaceChanged(surface) {\n    orbital.filterHSByPrice(surface);\n}\n\nfunction typesChanged(types) {\n    orbital.filterHSByTypes(types);\n}\n\nfunction refresh() {\n    orbitalError.value = false;\n    percentLoaded.value = 0;\n    loadRegionsInfo();\n}\n/***********************************\n  END Inner functions\n***********************************/\n\n\n\n\n\n\n\n\n/***********************************\n  Events functions\n***********************************/\nfunction onAppReady() {\n    showLoader.value = false;\n    _setOrbitalAngle();\n    _rotateCompass();\n    orbital.animator.canvasGroup.eventsCanvas.addEventListener('OnDrag', onDrag);\n}\n\nfunction onUpdateTimeline() {\n    _rotateCompass();\n}\n\nfunction onError() {\n    orbitalError.value = true;\n}\n\nfunction onLoadingChange() {\n    percentLoaded.value = orbital.getPercentLoaded();\n}\n\nfunction onDrag() {\n    _rotateCompass();\n}\n\nfunction onHSClick(e) {\n    const detail = e.detail;\n    const region = detail.region;\n    if (region === undefined) return;\n    hsData.value = region;\n    regionsStore.setRegion(region.nom);\n    detailsComponent.value.setImageSrc();\n    showHsDetails.value = true;\n}\n\nlet lastRegionBody = null;\nfunction onHSHover(e) {\n\n    const detail = e.detail;\n    const region = detail.region;\n\n    if (region === undefined || !Object.keys(regions.value).length) return;\n\n    const pos = e.detail.mousePos;\n\n    showPopper.value = true;\n\n    popoverPos.x = pos.x;\n    popoverPos.y = pos.y;\n\n    const regionBody = regions.value[region.name];\n\n    if (lastRegionBody === regionBody) return;\n\n    lastRegionBody = regionBody;\n    const type = regionBody.type;\n\n    currentColor.value = typesColors.value[type];\n\n    hsData.value = regionBody;\n\n    regionsStore.setRegion(region.name);\n}\n\nfunction onHSOut() {\n    showPopper.value = false;\n}\n\n/***********************************\n  END Events functions\n***********************************/\n\n\n\n\n\nonMounted(() => {\n    loadRegionsInfo();\n});\n\nonUnmounted(() => {\n    clearEvents();\n    orbital.unmountOrbital();\n});\n\n\nfunction addEvents() {\n    window.addEventListener(\"OnLoadingChange\", onLoadingChange);\n    window.addEventListener(\"OnUpdateTimeline\", onUpdateTimeline);\n    window.addEventListener(\"OnError\", onError);\n    window.addEventListener(\"OnAppReady\", onAppReady);\n    window.addEventListener(\"OnHSClick\", onHSClick);\n    window.addEventListener(\"OnHSHover\", onHSHover);\n    window.addEventListener(\"OnHSHoverOut\", onHSOut);\n}\n\nfunction clearEvents() {\n    window.removeEventListener(\"OnLoadingChange\", onLoadingChange);\n    window.removeEventListener(\"OnUpdateTimeline\", onUpdateTimeline);\n    window.addEventListener(\"OnError\", onError);\n    window.removeEventListener(\"OnAppReady\", onAppReady);\n    window.removeEventListener(\"OnHSClick\", onHSClick);\n    window.removeEventListener(\"OnHSHover\", onHSHover);\n    window.removeEventListener(\"OnHSHoverOut\", onHSOut);\n}\n\n</script>\n\n\n<style lang=\"scss\" scoped>\n.s-f-menu {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    z-index: 1000;\n}\n</style>\n","import script from \"./OrbitalComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./OrbitalComponent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./OrbitalComponent.vue?vue&type=style&index=0&id=478f6e2a&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-478f6e2a\"]])\n\nexport default __exports__","<template>\n    <div class=\"sidebar-parent\">\n\n        <Teleport to=\"#app\">\n            <button class=\"side-menu-toggler btn custom-btn lead\" type=\"button\" v-show=\"!isOpen\" @click=\"showMenu\"\n                ref=\"showBtn\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"currentColor\" class=\"bi bi-list\"\n                    viewBox=\"0 0 16 16\">\n                    <path fill-rule=\"evenodd\"\n                        d=\"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z\" />\n                </svg>\n                Menu\n            </button>\n        </Teleport>\n\n\n        <div class=\"sidebar show border-0 rounded\" ref=\"sidebar\" v-show=\"isOpen\">\n\n            <div class=\"sidebar-body p-1 d-flex flex-row justify-content-between align-items-center\">\n\n                <ul class=\"sidebar-menu p-0 close-menu\">\n                    <li class=\"sidebar-item\">\n                        <button type=\"button\" class=\"btn custom-btn btn-sm\" @click=\"closeMenu\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\"\n                                class=\"bi bi-x-lg\" viewBox=\"0 0 16 16\">\n                                <path\n                                    d=\"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z\" />\n                            </svg>\n                        </button>\n                    </li>\n                </ul>\n\n                <div class=\"vr\"></div>\n\n                <ul class=\"sidebar-menu d-none d-md-flex align-items-center\">\n                    <li class=\"sidebar-item\">\n                        <button class=\"btn custom-btn custom-sm\" @mousedown=\"$emit('onStep', true)\"\n                            @mouseup=\"$emit('onStepEnd')\" @touchstart.prevent=\"$emit('onStep', true)\"\n                            @touchend=\"$emit('onStepEnd')\" data-bs-toggle=\"tooltip\" v-bind:data-bs-placement=\"bsPlacement\"\n                            data-bs-title=\"Prev\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.2em\" height=\"1.2em\" fill=\"currentColor\"\n                                class=\"bi bi-arrow-counterclockwise\" viewBox=\"0 0 16 16\">\n                                <path fill-rule=\"evenodd\"\n                                    d=\"M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z\" />\n                                <path\n                                    d=\"M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z\" />\n                            </svg>\n                        </button>\n                    </li>\n                    <li class=\"sidebar-item\">\n                        <button class=\"btn custom-btn btn-sm\" @click=\"$emit('onPlay', true)\" data-bs-toggle=\"tooltip\"\n                            v-bind:data-bs-placement=\"bsPlacement\" data-bs-title=\"Play\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.2em\" height=\"1.2em\" fill=\"currentColor\"\n                                class=\"bi bi-play-circle\" viewBox=\"0 0 16 16\">\n                                <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\" />\n                                <path\n                                    d=\"M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445z\" />\n                            </svg>\n                        </button>\n                    </li>\n                    <li class=\"sidebar-item\">\n                        <button class=\"btn custom-btn btn-sm\" @click=\"$emit('onPlay', false)\" data-bs-toggle=\"tooltip\"\n                            v-bind:data-bs-placement=\"bsPlacement\" data-bs-title=\"Pause\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.2em\" height=\"1.2em\" fill=\"currentColor\"\n                                class=\"bi bi-stop-circle\" viewBox=\"0 0 16 16\">\n                                <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\" />\n                                <path\n                                    d=\"M5 6.5A1.5 1.5 0 0 1 6.5 5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5v-3z\" />\n                            </svg>\n                        </button>\n                    </li>\n\n                    <li class=\"sidebar-item\">\n                        <button class=\"btn custom-btn btn-sm\" @mousedown=\"$emit('onStep', false)\"\n                            @mouseup=\"$emit('onStepEnd')\" @touchstart.prevent=\"$emit('onStep', false)\"\n                            @touchend=\"$emit('onStepEnd')\" data-bs-toggle=\"tooltip\" v-bind:data-bs-placement=\"bsPlacement\"\n                            data-bs-title=\"Next\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.2em\" height=\"1.2em\" fill=\"currentColor\"\n                                class=\"bi bi-arrow-clockwise\" viewBox=\"0 0 16 16\">\n                                <path fill-rule=\"evenodd\"\n                                    d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z\" />\n                                <path\n                                    d=\"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z\" />\n                            </svg>\n                        </button>\n                    </li>\n\n                    <li class=\"sidebar-item\">\n                        <button class=\"btn custom-btn btn-sm\" @mousedown=\"$emit('onZoom', true)\"\n                            @mouseup=\"$emit('onZoomEnd')\" @touchstart.prevent=\"$emit('onZoom', true)\"\n                            @touchend=\"$emit('onZoomEnd')\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.2em\" height=\"1.2em\" fill=\"currentColor\"\n                                class=\"bi bi-zoom-in\" viewBox=\"0 0 16 16\">\n                                <path fill-rule=\"evenodd\"\n                                    d=\"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\" />\n                                <path\n                                    d=\"M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z\" />\n                                <path fill-rule=\"evenodd\"\n                                    d=\"M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z\" />\n                            </svg>\n                        </button>\n                    </li>\n\n                    <li class=\"sidebar-item\">\n                        <button class=\"btn custom-btn btn-sm\" @mousedown=\"$emit('onZoom', false)\"\n                            @mouseup=\"$emit('onZoomEnd')\" @touchstart.prevent=\"$emit('onZoom', false)\"\n                            @touchend=\"$emit('onZoomEnd')\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.2em\" height=\"1.2em\" fill=\"currentColor\"\n                                class=\"bi bi-zoom-out\" viewBox=\"0 0 16 16\">\n                                <path fill-rule=\"evenodd\"\n                                    d=\"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\" />\n                                <path\n                                    d=\"M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z\" />\n                                <path fill-rule=\"evenodd\"\n                                    d=\"M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z\" />\n                            </svg>\n                        </button>\n                    </li>\n                </ul>\n\n\n                <div class=\"vr d-none d-md-block\"></div>\n\n                <ul class=\"sidebar-menu align-self-start align-self-sm-center overflow-auto\">\n\n                    <div class=\"d-flex align-items-center\">\n                        <li class=\"sidebar-item\" v-for=\"stage in stages\" :key=\"stage.index + 1\">\n                            <button class=\"btn custom-btn btn-sm\" :class=\"{ 'active': stage.isActive }\"\n                                @click=\"stageClick(stage.index)\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.2em\" height=\"1.2em\" fill=\"currentColor\"\n                                    class=\"bi bi-layers-half\" viewBox=\"0 0 16 16\">\n                                    <path\n                                        d=\"M8.235 1.559a.5.5 0 0 0-.47 0l-7.5 4a.5.5 0 0 0 0 .882L3.188 8 .264 9.559a.5.5 0 0 0 0 .882l7.5 4a.5.5 0 0 0 .47 0l7.5-4a.5.5 0 0 0 0-.882L12.813 8l2.922-1.559a.5.5 0 0 0 0-.882l-7.5-4zM8 9.433 1.562 6 8 2.567 14.438 6 8 9.433z\" />\n                                </svg> {{ stage.title }}\n                            </button>\n                        </li>\n                    </div>\n\n\n                </ul>\n\n                <div class=\"vr\"></div>\n\n                <ul class=\"sidebar-menu\">\n                    <li class=\"sidebar-item\">\n                        <button class=\"btn custom-btn btn-sm\" @click=\"$emit('onShowFilter')\" data-bs-toggle=\"tooltip\"\n                            v-bind:data-bs-placement=\"bsPlacement\" data-bs-title=\"Filtre\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.2em\" height=\"1.2em\" fill=\"currentColor\"\n                                class=\"bi bi-filter\" viewBox=\"0 0 16 16\">\n                                <path\n                                    d=\"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z\" />\n                            </svg>\n                        </button>\n                    </li>\n                </ul>\n\n            </div>\n\n        </div>\n\n\n\n    </div>\n</template>\n\n\n\n\n<script setup>\n\nimport { ref, watch, watchEffect, onMounted, onBeforeUnmount } from \"vue\";\nimport { Tooltip } from \"bootstrap\";\nimport { gsap } from \"gsap\";\n\nconst bsPlacement = \"top\";\n\nconst props = defineProps({\n    stageCount: {\n        type: Number,\n        validator(value) {\n            return value > 0\n        },\n        default: 1\n    },\n\n    startingAt: {\n        type: Number,\n        default: 0\n    },\n\n    stagePrefix: {\n        type: String,\n        default: \"R\"\n    }\n});\n\nconst emits = defineEmits([\n    \"onSetLevel\",\n    \"onPlay\",\n    \"onStep\",\n    \"onStepEnd\",\n    \"onShowFilter\",\n    \"onZoom\",\n    \"onZoomEnd\"\n]);\n\nconst isOpen = ref(false);\n\nconst activeStageIndex = ref(props.startingAt);\n\nconst stages = ref([]);\n\nlet tooltipObj = undefined;\n\nwatch(() => props.startingAt, () => {\n    activeStageIndex.value = props.startingAt;\n});\n\nwatchEffect(() => {\n    const count = props.stageCount;\n    for (let i = 0; i < count; i++) {\n        stages.value[i] = {\n            index: i,\n            title: props.stagePrefix.concat(i),\n            isActive: activeStageIndex.value === i\n        }\n    }\n\n    stages.value[0].title = \"RDC\";\n\n    if (count > 1) {\n        stages.value[count - 1].title = \"Toit\";\n    }\n\n});\n\nfunction stageClick(index) {\n    activeStageIndex.value = index;\n    emits('onSetLevel', index);\n}\n\nconst showBtn = ref(null);\nconst sidebar = ref(null);\n\nfunction showMenu() {\n    isOpen.value = true;\n    gsap.set(sidebar.value, {\n        autoAlpha: 0,\n        y: \"100%\"\n    });\n    gsap.to(sidebar.value, {\n        autoAlpha: 1,\n        y: 0,\n        duration: .3\n    });\n}\n\nfunction closeMenu() {\n\n    gsap.set(showBtn.value, {\n        scale: 0,\n        autoAlpha: 0,\n    });\n\n    gsap.to(sidebar.value, {\n        autoAlpha: 0,\n        y: \"100%\",\n        duration: .3,\n        onComplete: () => {\n            isOpen.value = false\n        }\n    });\n\n    gsap.to(showBtn.value, {\n        scale: 1,\n        autoAlpha: 1,\n        duration: .3,\n        delay: .3,\n        ease: \"back.out(3)\",\n    });\n}\n\n\n\nonMounted(() => {\n    const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle=\"tooltip\"]');\n    tooltipObj = [...tooltipTriggerList].map(tooltipTriggerEl => new Tooltip(tooltipTriggerEl, {\n        trigger: \"hover\",\n        customClass: \"custom-tooltip\",\n    }));\n});\n\nonBeforeUnmount(() => {\n    tooltipObj.forEach(tooltip => {\n        tooltip.dispose();\n    });\n})\n\n</script>\n\n\n\n\n<style lang=\"scss\" scoped>\n$app-color : #0078a0;\n\n$SB-bg-color : #f5f5f5;\n$SB-btn-bg-color : #595959;\n\n$SB-shadow : 0 0 0.4em #c1c1c1;\n\n.custom-tooltip {\n    background-color: $SB-bg-color;\n}\n\n.side-menu-toggler {\n    position: fixed;\n    bottom: 0;\n    left: 50%;\n    transform: translate(-50%);\n    z-index: 100;\n    background-color: $SB-bg-color;\n    font-size: .9em;\n    box-shadow: $SB-shadow;\n\n    &:hover {\n        background-color: $SB-btn-bg-color;\n    }\n}\n\n.sidebar-parent {\n    position: absolute;\n    width: 80%;\n    bottom: 2rem;\n    left: 50%;\n    transform: translate(-50%);\n    max-height: 5em !important;\n    z-index: 101;\n\n    .vr {\n        background-color: $SB-btn-bg-color;\n    }\n\n    .sidebar {\n        margin: auto;\n        border: none;\n        background-color: $SB-bg-color !important;\n        box-shadow: $SB-shadow;\n\n        .sidebar-body {\n            overflow: hidden;\n        }\n\n        .sidebar-menu {\n            list-style: none;\n            padding: 0 1em;\n            margin: 0;\n        }\n\n        .sidebar-item {\n            padding: 0.3em;\n            margin: 0em 0.1em;\n            text-align: center;\n            display: inline;\n        }\n\n\n    }\n\n}\n</style>","import script from \"./OrbitalMenu.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./OrbitalMenu.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./OrbitalMenu.vue?vue&type=style&index=0&id=7290665a&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7290665a\"]])\n\nexport default __exports__","<template>\n    <div class=\"position-absolute popper\" ref=\"popper\" v-show=\"showPopover\">\n        <div class=\"card shadow border border-0\">\n            <div class=\"card-header p-0 overflow-hidden\">\n                <div class=\"color-type\"></div>\n                <div class=\"container-fluid\">\n                    <div class=\"row align-items-center bg-dark text-white py-2 text-uppercase text-center\">\n                        <div class=\"col-4 p-0\">\n                            <p class=\"p-0 m-0\">Appt-{{ appt }}</p>\n                        </div>\n                        <div class=\"col-4 p-0\">\n                            <p class=\"p-0  m-0\">Bloc-{{ bloc }}</p>\n                        </div>\n                        <div class=\"col-4 p-0\">\n                            <p class=\"p-0  m-0\">Etage-{{ etage }}</p>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n            <div class=\"card-body\">\n                <div class=\"container-fluid\">\n\n                    <div class=\"row align-items-center p-1\">\n                        <div class=\"col-4\">\n                            <span>Surface</span>\n                        </div>\n                        <div class=\"col-8\">\n                            <p>{{ currentRegion.surface }} M<sup>2</sup></p>\n                        </div>\n                    </div>\n\n                    <div class=\"row align-items-center p-1\">\n                        <div class=\"col-4\">\n                            <span>Type</span>\n                        </div>\n                        <div class=\"col-8\">\n                            <p>{{ currentRegion.type }}</p>\n                        </div>\n                    </div>\n\n                    <div class=\"row align-items-center p-1\">\n                        <div class=\"col-4\">\n                            <span>Code</span>\n                        </div>\n                        <div class=\"col-8\">\n                            <p>{{ currentRegion.code_ref }}</p>\n                        </div>\n                    </div>\n                </div>\n\n\n            </div>\n\n            <div class=\"card-footer bg-transparent\">\n                <span>{{ currentRegion.statut }}</span>\n                <span class=\"mx-1 text-success\" v-if=\"currentRegion.statut === 'Disponible'\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.5em\" height=\"1.5em\" fill=\"currentColor\"\n                        class=\"bi bi-check-lg\" viewBox=\"0 0 16 16\">\n                        <path\n                            d=\"M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z\" />\n                    </svg>\n                </span>\n\n                <span class=\"mx-1 text-danger\" v-else>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.6em\" height=\"1.6em\" fill=\"currentColor\" class=\"bi bi-x\"\n                        viewBox=\"0 0 16 16\">\n                        <path\n                            d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\" />\n                    </svg>\n                </span>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script setup>\n\n\nimport { ref, watch, onMounted, onUnmounted } from \"vue\";\nimport { createPopper } from '@popperjs/core';\nimport { useRegionsStore } from \"@/stores/regions\";\nimport { storeToRefs } from 'pinia';\n\nconst regionsStore = useRegionsStore();\n\n\n\nconst props = defineProps({\n\n    showPopover: {\n        type: Boolean,\n        default: false\n    },\n    positions: {\n        type: Object,\n\n    }\n});\n\n\nconst { currentColor, currentRegion, appt, bloc, etage } = storeToRefs(regionsStore);\n\nlet pInstance = null;\nlet virtualElement = null;\nconst popper = ref(null);\n\n\nfunction initPopover() {\n    virtualElement = {\n        getBoundingClientRect: generateGetBoundingClientRect(),\n    };\n    pInstance = createPopper(virtualElement, popper.value, {\n        placement: 'top',\n        modifiers: [\n            {\n                name: 'offset',\n                options: {\n                    offset: ({ placement }) => {\n                        if (placement === 'bottom') {\n                            return [0, 30];\n                        }\n\n                        if (placement === 'top') {\n                            return [0, 30];\n                        }\n\n                        return [];\n                    },\n                }\n            },\n        ]\n    });\n}\n\nfunction updatePopover(x, y) {\n    virtualElement.getBoundingClientRect = generateGetBoundingClientRect(x, y);\n    pInstance.update();\n}\n\nfunction generateGetBoundingClientRect(x = 0, y = 0) {\n    return () => ({\n        width: 0,\n        height: 0,\n        top: y,\n        right: x,\n        bottom: y,\n        left: x,\n    });\n}\n\nwatch(props.positions, () => {\n    updatePopover(props.positions.x, props.positions.y);\n});\n\nonMounted(() => {\n    initPopover();\n});\n\nonUnmounted(() => {\n    pInstance.destroy();\n});\n\n</script>\n\n\n\n\n<style lang=\"scss\" scoped>\n.popper {\n    opacity: .9;\n    z-index: 1030;\n    width: 20em;\n    user-select: none;\n}\n\n.card {\n    $type-color : v-bind(currentColor);\n    border-radius: .3em;\n\n    .card-header {\n        .color-type {\n            height: .5em;\n            background-color: $type-color;\n            padding: 0;\n        }\n\n        p {\n            font-size: .8em;\n            letter-spacing: .2em;\n        }\n    }\n\n    .card-body {\n        span {\n            font-size: .9em;\n            font-weight: bold;\n            color: $type-color;\n        }\n\n        p {\n            font-size: .9em;\n            color: #7f7f7f;\n            margin: 0;\n            font-weight: 500;\n        }\n    }\n\n    .card-footer {\n        span {\n            font-size: .8em;\n            font-weight: bold;\n            color: #7f7f7f;\n        }\n    }\n\n\n}\n</style>","import script from \"./PopoverComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PopoverComponent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PopoverComponent.vue?vue&type=style&index=0&id=68af6d3e&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-68af6d3e\"]])\n\nexport default __exports__","<template>\n    <div class=\"card-parent shadow-sm\">\n        <div class=\"card-head w-100 mb-2\">\n            <div class=\"container-fluid\">\n                <div class=\"row\">\n                    <div class=\"col-12 color-type\"></div>\n                </div>\n                <div class=\"row text-center align-items-center bg-dark text-white py-2 text-uppercase\">\n                    <div class=\"col-5 p-0\">\n                        <p class=\"p-1 m-0\">Appt-{{ appt }}</p>\n                    </div>\n                    <div class=\"col-2\">\n                        <div class=\"vr\"></div>\n                    </div>\n                    <div class=\"col-5 p-0\">\n                        <p class=\"p-1  m-0\">Bloc-{{ bloc }}</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"container-fluid\">\n            <div class=\"row\">\n                <div class=\"card-image d-flex align-items-center p-1\">\n                    <ImageComponent :src=\"`assets/images/lots/3d/${cardInfo.nom}.jpg`\" />\n                </div>\n            </div>\n        </div>\n\n        <hr />\n\n        <div class=\"container-fluid\">\n\n            <div class=\"card-content row align-items-center\">\n                <div class=\"col-5 text-start content-title p-2\">\n                    <span class=\"\">Etage</span>\n                </div>\n                <div class=\"col-7 content-value\">\n                    <span>{{ stage }}</span>\n                </div>\n            </div>\n\n            <div class=\"card-content row align-items-center\">\n                <div class=\"col-5 text-start content-title p-2\">\n                    <span class=\"\">Type</span>\n                </div>\n                <div class=\"col-7 content-value\">\n                    <span>{{ cardInfo.type }}</span>\n                </div>\n            </div>\n\n            <div class=\"card-content row align-items-center\">\n                <div class=\"col-5 text-start content-title p-2\">\n                    <span class=\"\">Surface</span>\n                </div>\n                <div class=\"col-7 content-value\">\n                    <span>{{ cardInfo.surface }} M<sup>2</sup></span>\n                </div>\n            </div>\n\n            <div class=\"card-content row align-items-center\">\n                <div class=\"col-5 text-start content-title p-2\">\n                    <span class=\"\">Terrasse</span>\n                </div>\n                <div class=\"col-7 content-value\">\n                    <span>{{ cardInfo.terrasse }} M<sup>2</sup></span>\n                </div>\n            </div>\n\n            <div class=\"card-content row align-items-center\">\n                <div class=\"col-5 text-start content-title p-2\">\n                    <span class=\"\">Code</span>\n                </div>\n                <div class=\"col-7 content-value\">\n                    <span>{{ cardInfo.code_ref }}</span>\n                </div>\n            </div>\n        </div>\n\n        <hr />\n\n        <edit-appt :card-info=\"cardInfo\" :color-type=\"typeColor\" :is-admin=\"isAdmin\"></edit-appt>\n    </div>\n</template>\n\n\n<script setup>\n\nimport { ref, computed } from \"vue\";\nimport ImageComponent from \"@/components/app-ui/ImageComponent\";\nimport EditAppt from \"@/components/admin/EditAppt\";\n\n\n\nconst props = defineProps({\n    cardInfo: Object,\n    typesColors: Object,\n    isAdmin: {\n        type: Boolean,\n        default: false\n    }\n});\n\nconst colorsProps = ref(props.typesColors);\nconst appt = computed(() => {\n    const a = props.cardInfo.appt;\n    const prefix = (a <= 9) ? \"0\" : \"\";\n    return prefix + a;\n});\nconst bloc = computed(() => {\n    const a = props.cardInfo.bloc;\n    const prefix = (a <= 9) ? \"0\" : \"\";\n    return prefix + a;\n});\nconst typeColor = computed(() => {\n    const type = props.cardInfo.type;\n    return colorsProps.value[type] || \"#cecece\";\n});\n\nconst stage = computed(() => {\n    const stage = props.cardInfo.etage;\n    return stage == 0 ? \"RDC\" : stage;\n});\n\n\n</script>\n\n<style lang=\"scss\" scoped>\n$type-color : v-bind(typeColor);\n\n.card-parent {\n\n    border: 1px solid #e6e6e6;\n    overflow: hidden;\n    border-radius: .2em;\n\n    .card-head {\n\n        letter-spacing: .1em;\n        font-size: .9em;\n\n        .color-type {\n            height: .5em;\n            background-color: $type-color;\n        }\n    }\n\n    .card-image {\n        height: 9em;\n        overflow: hidden;\n    }\n\n\n    .content-title {\n\n        span {\n            font-size: .9em;\n            color: #6a6a6a;\n        }\n\n    }\n\n    .content-value {\n\n        span {\n            font-size: .8em;\n            font-weight: bold;\n            color: $type-color;\n            filter: brightness(0.85);\n        }\n\n    }\n\n    .dispo {\n        font-size: .9em;\n    }\n\n}\n</style>","import script from \"./CardSearch.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CardSearch.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CardSearch.vue?vue&type=style&index=0&id=388cf4d2&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-388cf4d2\"]])\n\nexport default __exports__","<template>\n    <div class=\"list-cards\">\n        <div class=\"container-fluid\">\n            <div class=\"row justify-content-left\">\n                <div class=\"col-sm-6 col-md-6 col-lg-4 mb-4\" v-for=\"(card, _, index) in infinitData\" :key=\"index\">\n                    <card-search :card-info=\"card\" :types-colors=\"colorTypes\" :is-admin=\"showAdmin\"></card-search>\n                </div>\n            </div>\n            <div class=\"row text-center\" v-if=\"Object.keys(infinitData).length === 0\">\n                <div class=\"col\">\n                    <p class=\"my-5 pt-5 fw-2 fs-4 text-secondary\">Aucun resultat</p>\n                    <span class=\"text-light my-5\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16em\" height=\"16em\" fill=\"currentColor\"\n                            class=\"bi bi-exclamation-square-fill\" viewBox=\"0 0 16 16\">\n                            <path\n                                d=\"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\" />\n                        </svg>\n                    </span>\n                </div>\n            </div>\n        </div>\n\n        <!-- Infinite Trigger Element -->\n        <span ref=\"infiniteElem\" v-if=\"showTrigger\"></span>\n        <div v-if=\"showTrigger\">\n            <div class=\"d-flex justify-content-center\">\n                <div class=\"spinner-grow spinner\" role=\"status\">\n                    <span class=\"visually-hidden\">Loading...</span>\n                </div>\n            </div>\n        </div>\n        <!-- End Infinite Trigger Element -->\n\n    </div>\n</template>\n\n\n<script setup>\n\nimport CardSearch from \"@/components/orbital/search/CardSearch.vue\";\n\nimport { useIntersectionObserver } from '@vueuse/core';\n\nimport { ref, watch } from \"vue\";\n\nimport { useRegionsStore } from \"@/stores/regions\";\nimport { storeToRefs } from 'pinia';\n\nconst regionsStore = useRegionsStore();\n\nconst props = defineProps({\n    fetchBy: {\n        type: Number,\n        default: 6\n    },\n    showAdmin: {\n        type: Boolean,\n        default: false\n    }\n});\n\nconst { colorTypes, filteredRegions, firstFetch } = storeToRefs(regionsStore);\n\nconst countPerFetch = ref(props.fetchBy);\nconst infiniteElem = ref(null);\nconst infinitData = ref({});\nconst showTrigger = ref(false);\n\nuseIntersectionObserver(\n    infiniteElem,\n    ([{ isIntersecting }]) => {\n        const length = Object.keys(infinitData.value).length;\n        if (isIntersecting) {\n            const arr = Object.entries(infinitData.value);\n            arr.push(...getMore());\n            infinitData.value = Object.fromEntries(arr);\n        }\n\n        if (length >= Object.keys(filteredRegions.value).length || length <= 0) {\n            showTrigger.value = false;\n        }\n    },\n    {\n        threshold: 0.1,\n    }\n);\n\n\nfunction getMore() {\n    const length = Object.entries(infinitData.value).length;\n    return Object.entries(filteredRegions.value).slice(length, length + countPerFetch.value);\n}\n\nwatch(filteredRegions, () => {\n    infinitData.value = Object.fromEntries(\n        Object.entries(filteredRegions.value).slice(0, countPerFetch.value)\n    );\n    showTrigger.value = !firstFetch.value;\n});\n\n\n</script>\n\n\n<style lang=\"scss\" scoped>\n.spinner {\n    color: #d5d5d5;\n}\n</style>","import script from \"./ListCards.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ListCards.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ListCards.vue?vue&type=style&index=0&id=07d7fa4a&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-07d7fa4a\"]])\n\nexport default __exports__","<template>\n    <div class=\"slider-parent\">\n\n\n        <div class=\"slider\">\n            <div class=\"fs-6 text-secondary text-center \">\n                <span>Surface en M</span>\n            </div>\n            <div class=\"position-relative ranges\">\n                <input type=\"range\" class=\"form-range position-absolute\" id=\"min-range\" ref=\"minSlider\" :max=\"max\"\n                    :min=\"min\" :step=\"step\" v-model=\"minValue\" @input=\"minSliderInput\">\n                <input type=\"range\" class=\"form-range position-absolute\" id=\"max-range\" ref=\"maxSlider\" :max=\"max\"\n                    :min=\"min\" :step=\"step\" v-model=\"maxValue\" @input=\"maxSliderInput\">\n            </div>\n        </div>\n\n        <div class=\"range-info d-flex justify-content-between align-items-center my-4\">\n            <div class=\"form-floating mx-4 mx-sm-1\">\n                <input type=\"number\" id=\"min-input\" class=\"form-control\" :value=\"minValue\" @input=\"debounceMin\">\n                <label for=\"min-input\">min</label>\n            </div>\n\n            <div class=\"form-floating mx-4 mx-sm-1\">\n                <input class=\"form-control\" type=\"number\" id=\"max-input\" :value=\"maxValue\" @input=\"debounceMax\">\n                <label for=\"max-input\">max</label>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n\n\n<script setup>\n\nimport debounce from \"lodash/debounce\";\nimport { ref, reactive, watch, onMounted, onUnmounted } from \"vue\";\n\n\nconst emits = defineEmits([\n    \"onSurfaceChanged\"\n]);\n\n\nconst props = defineProps({\n\n    min: {\n        type: Number,\n        default: 0\n    },\n    max: {\n        type: Number,\n        default: 100\n    },\n    step: {\n        type: Number,\n        default: 1\n    },\n    gap: {\n        type: Number,\n        default: 10\n    },\n    sliderColor: {\n        type: String,\n        default: \"#cecece\"\n    },\n    rangeColor: {\n        type: String,\n        default: \"#21af4f\"\n    },\n\n    sliderDelay: {\n        type: Number,\n        default: 1000\n    },\n\n    inputsDelay: {\n        type: Number,\n        default: 800\n    }\n});\n\n\n\nconst minValue = ref(props.min);\nconst maxValue = ref(props.max);\n\nconst surface = reactive({\n    min: minValue.value,\n    max: maxValue.value\n})\n\nconst maxSlider = ref(null);\n\nfunction initSliders() {\n    fillSlider(minValue.value, maxValue.value);\n    surfaceChanged();\n}\n\n\nfunction controlSlider(isMinSlider) {\n    const gap = Number(props.gap);\n    const min = Number(minValue.value);\n    const max = Number(maxValue.value);\n    const validMax = max - gap;\n\n    if (min < props.min) {\n        minValue.value = props.min;\n        fillSlider(min, max);\n        return;\n    }\n\n    if (max > props.max) {\n        maxValue.value = props.max;\n        fillSlider(min, max);\n        return;\n    }\n\n    if (isMinSlider) {\n        if (min > validMax) {\n            minValue.value = validMax;\n            fillSlider(validMax, max);\n            return;\n        }\n        fillSlider(min, max);\n        return;\n    }\n\n    if (minValue.value > validMax) {\n        maxValue.value = min + gap;\n        fillSlider(min, maxValue.value);\n        return;\n    }\n    fillSlider(min, max);\n\n}\n\nfunction fillSlider(from, to) {\n\n    if (!maxSlider.value) return;\n    const rangeDistance = props.max - props.min;\n    const fromPosition = from - props.min;\n    const toPosition = to - props.min;\n    const sliderColor = props.sliderColor;\n    const rangeColor = props.rangeColor;\n\n    maxSlider.value.style.background = `linear-gradient(\n            to right,\n            ${sliderColor} 0%,\n            ${sliderColor} ${(fromPosition) / (rangeDistance) * 100}%,\n            ${rangeColor} ${((fromPosition) / (rangeDistance)) * 100}%,\n            ${rangeColor} ${(toPosition) / (rangeDistance) * 100}%, \n            ${sliderColor} ${(toPosition) / (rangeDistance) * 100}%, \n            ${sliderColor} 100%)`;\n}\n\nfunction surfaceChanged() {\n    emits(\"onSurfaceChanged\", surface);\n}\n\n\n\n//SLIDERS\nfunction minSliderInput() {\n    controlSlider(true)\n    debounceMinSlider();\n}\nfunction maxSliderInput() {\n    controlSlider(false)\n    debounceMaxSlider();\n}\nconst debounceMinSlider = debounce(() => {\n    surface.min = minValue.value;\n}, props.sliderDelay);\nconst debounceMaxSlider = debounce(() => {\n    surface.max = maxValue.value;\n}, props.sliderDelay);\n\n\n\n//INPUTS\nconst debounceMin = debounce((evt) => {\n    minValue.value = evt.target.value;\n    surface.min = minValue.value;\n    controlSlider(true)\n}, props.inputsDelay);\n\nconst debounceMax = debounce((evt) => {\n    maxValue.value = evt.target.value;\n    surface.max = maxValue.value;\n    controlSlider(false);\n}, props.inputsDelay);\n\n\nwatch(surface, () => {\n    surfaceChanged();\n});\n\n\nonMounted(() => {\n    initSliders();\n});\n\nonUnmounted(() => {\n});\n\n</script>\n\n\n\n\n<style lang=\"scss\" scoped>\n.ranges {\n    margin: 1em 0;\n    min-height: 1em;\n}\n\ninput[type=range] {\n    height: 0.3em;\n    width: 100%;\n    position: absolute;\n    background-color: #C6C6C6;\n    pointer-events: none;\n    border-radius: 2em;\n}\n\ninput[type=range]::-moz-range-thumb {\n    cursor: pointer;\n    pointer-events: all;\n}\n\n\ninput[type=range]::-webkit-slider-thumb {\n    cursor: pointer;\n    pointer-events: all;\n}\n\n\ninput[type=range]::-moz-range-track {\n    background-color: transparent;\n\n}\n\ninput[type=range]::-webkit-slider-runnable-track {\n    background-color: transparent;\n\n}\n\n\n#min-range {\n    top: 0.15em;\n    height: 0;\n    z-index: 1;\n}\n</style>","import script from \"./SliderFilter.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SliderFilter.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SliderFilter.vue?vue&type=style&index=0&id=3c12e3da&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3c12e3da\"]])\n\nexport default __exports__","<template>\n    <div class=\"stages-parent w-100\">\n        <div class=\"fs-6 text-center text-secondary mb-2\">\n            <span>Etages</span>\n        </div>\n        <div class=\"container-fluid\">\n            <div class=\"row justify-content-center\">\n                <div class=\"col-5 col-sm-2 col-md-3 position-relative p-0 m-1 text-center\" v-for=\"index in stageCount\"\n                    :key=\"index\">\n                    <input type=\"checkbox\" class=\"btn-check\" :id=\"'stages-' + index\" :value=\"index - 1\"\n                        v-model=\"checkedStages\" autocomplete=\"off\">\n                    <label class=\"btn border-0 bg-white text-black text-center p-2\" :for=\"'stages-' + index\">\n\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.2em\" height=\"1.2em\" fill=\"currentColor\"\n                            class=\"bi bi-layers-half\" viewBox=\"0 0 16 16\">\n                            <path\n                                d=\"M8.235 1.559a.5.5 0 0 0-.47 0l-7.5 4a.5.5 0 0 0 0 .882L3.188 8 .264 9.559a.5.5 0 0 0 0 .882l7.5 4a.5.5 0 0 0 .47 0l7.5-4a.5.5 0 0 0 0-.882L12.813 8l2.922-1.559a.5.5 0 0 0 0-.882l-7.5-4zM8 9.433 1.562 6 8 2.567 14.438 6 8 9.433z\" />\n                        </svg> {{ index - 1 }}\n\n                    </label>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</template>\n\n\n<script setup>\n\n\nimport { ref, watch, onMounted } from \"vue\";\n\n\nconst emits = defineEmits([\n    \"onStagesChanged\"\n]);\n\nconst props = defineProps({\n    stageCount: Number,\n    defaultStages: {\n        type: Array,\n        default() {\n            return []\n        }\n    }\n});\n\nconst checkedStages = ref(props.defaultStages);\n\nfunction stageChanged() {\n    emits(\"onStagesChanged\", checkedStages.value);\n}\n\nwatch(checkedStages, () => {\n    stageChanged();\n});\n\nwatch(() => props.defaultStages, () => {\n    checkedStages.value = props.defaultStages;\n    stageChanged();\n});\n\nonMounted(() => {\n    stageChanged();\n});\n\n</script>\n\n\n\n<style lang=\"scss\" scoped>\n.btn-check {\n    +.btn {\n        font-size: .9em;\n        font-weight: normal;\n        border-radius: .2em;\n    }\n}\n\n.btn-check:checked {\n    +.btn {\n        filter: brightness(0.9);\n        position: relative;\n\n    }\n\n}\n</style>","import script from \"./StagesFilter.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./StagesFilter.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./StagesFilter.vue?vue&type=style&index=0&id=13731268&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-13731268\"]])\n\nexport default __exports__","<template>\n    <div class=\"status-parent\">\n        <div class=\"fs-6 text-center text-secondary mb-3\">\n            <span>Status</span>\n        </div>\n\n        <div class=\"d-flex justify-content-center text-white\">\n\n            <div class=\"me-2\" v-for=\"(stat, index ) in status\" :key=\"index\">\n                <input type=\"checkbox\" class=\"btn-check\" :id=\"stat.name + index\" v-model=\"currentStatus\" :value=\"stat.value\"\n                    autocomplete=\"off\">\n                <label class=\"btn custom-checkbox border-0 text-white text-start bg-success pe-4\" :class=\"stat.css_type\"\n                    :for=\"stat.name + index\">\n                    {{ stat.name }}\n                </label>\n            </div>\n\n        </div>\n    </div>\n</template>\n\n\n<script setup>\n\nimport { ref, watch, onMounted } from \"vue\";\n\nimport { useAppDataStore } from \"@/stores/appData\";\nimport { storeToRefs } from \"pinia\";\n\nconst appDataStore = useAppDataStore();\n\nconst { status, defaultStatus } = storeToRefs(appDataStore);\n\n\nconst emits = defineEmits([\n    \"onStatusChanged\"\n]);\n\nconst currentStatus = ref(defaultStatus.value);\n\nfunction statusChanged() {\n    emits(\"onStatusChanged\", currentStatus.value);\n}\n\nwatch(currentStatus, () => {\n    statusChanged();\n});\n\nwatch(() => defaultStatus.value, () => {\n    currentStatus.value = defaultStatus.value;\n    statusChanged();\n});\n\nonMounted(() => {\n    statusChanged();\n})\n</script>\n\n\n<style lang=\"scss\"></style>","import script from \"./StatusFilter.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./StatusFilter.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n    <div class=\"types\">\n\n        <div class=\"fs-6 text-center text-secondary mb-3\">\n            <span>Types d'appartement</span>\n        </div>\n\n        <div class=\"d-flex justify-content-center\">\n            <div class=\"me-2 w-50 position-relative\" v-for=\"(value, key, index) in colorTypes\" :key=\"index\">\n                <input type=\"checkbox\" class=\"btn-check\" :id=\"'checkbox-' + index\" :value=\"key\" v-model=\"checkedTypes\"\n                    autocomplete=\"off\">\n                <label class=\"btn custom-checkbox border-0 text-white text-start w-100\" :for=\"'checkbox-' + index\"\n                    :style=\"{ 'background-color': value }\">\n                    {{ key }}\n                </label>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script setup>\n\nimport { ref, watch, onMounted } from \"vue\";\nimport { useRegionsStore } from \"@/stores/regions\";\nimport { storeToRefs } from 'pinia';\n\nconst regionsStore = useRegionsStore();\n\nconst { colorTypes } = storeToRefs(regionsStore);\n\nconst emits = defineEmits([\n    \"onTypesChanged\"\n]);\n\nconst props = defineProps({\n    defaultTypes: {\n        type: Array,\n        default() {\n            return []\n        }\n    }\n});\n\nconst checkedTypes = ref(props.defaultTypes);\n\n\nfunction typesChanged() {\n    emits(\"onTypesChanged\", checkedTypes.value);\n}\n\nwatch(checkedTypes, () => {\n    typesChanged();\n});\n\nwatch(() => props.defaultTypes, () => {\n    checkedTypes.value = props.defaultTypes;\n    typesChanged();\n});\n\nonMounted(() => {\n    typesChanged();\n});\n\n\n</script>\n\n<style lang=\"scss\" scoped>\n.btn-check {\n    +.btn {\n        letter-spacing: .2em;\n        font-weight: 600;\n    }\n}\n</style>","import script from \"./TypesFilter.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TypesFilter.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./TypesFilter.vue?vue&type=style&index=0&id=858dd8e0&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/Zak/Desktop/orbital-v-0.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-858dd8e0\"]])\n\nexport default __exports__"],"names":["Animation","constructor","fileNameTemplate","countSprite","onFinishLoading","onLoadingChange","this","_images","_countSprite","imgLoaded","_loadAnimation","allPromises","i","p","Promise","resolve","reject","path","replace","imgPath","require","image","Image","src","push","addEventListener","e","console","log","all","then","catch","findFrame","index","Animator","canvasGroup","animationsPattern","options","hotspotRegions","regionInfo","_options","hotspots","_tilesCanvas","tilesCanvas","_animCanvas","animation","_eventsCanvas","eventsCanvas","_hotspotRegions","_regionInfo","init","_currentWidth","_currentHeight","_countFrames","framesCount","_tlTimeDraw","timeLineSpeed","_animations","maxWidth","maxHeight","_animationIndex","animStart","_frameIndex","frameStart","mobileWidth","_reverse","_isPlaying","_currentFrame","_animationsReady","cancel","_tilesController","_resizer","percentLoaded","_countAnimLoaded","_zoomPoints","undefined","_animCtx","getContext","_tilesCtx","_loadAnimations","loadPromises","total","length","promise","pattern","anim","error","Math","round","window","dispatchEvent","CustomEvent","bubbles","_setup","Error","min","max","parseInt","Resizer","_initTiles","Hotspots","_inputSystem","InputSystem","width","height","zoomOptions","dragOptions","rect","_onZoomEvent","onDragEvent","onresize","resize","zoom","setMaxZoom","requestFrameDraw","TilesController","run","_showAnimationFrame","autoplay","setTimeout","play","requestAnimationFrame","timestamp","_update","stop","cancelAnimationFrame","_startTime","elapsed","_step","reverse","_setPrevIndex","_setNextIndex","_draw","_getAnimation","scaleFactor","currentScale","_setZoomOffset","x","_offsetX","y","_offsetY","clearRect","animIndex","frameIndex","offsetX","offsetY","pr","fetchTiles","canvas","scale","drawImage","drawHts","screenCenterX","screenCenterY","xPivot","yPivot","framePosX","framePosY","zPointx","zPointy","isZoomIn","speed","maxMagnitude","angle","atan2","magnitude","sqrt","pow","cos","sin","switchAnimation","playFrame","_zoomLerp","points","zoomPoints","detail","CanvasBuilder","parentId","_parentId","_parentElem","createLayers","document","getElementById","alert","createCanvas","htEffectCanvas","htDrawCanvas","animCanvas","htRefCanvas","style","left","visibility","layers","hotspotsRef","hotspotsDraw","hotspotsEffects","id","zId","createElement","documentElement","clientWidth","clientHeight","position","zIndex","top","appendChild","Drag","_sensitivity","sensitivity","_threshold","threshold","_throwSens","throwSens","_maxVelocity","maxVelocity","_maxStepsCaptures","velocity","isDragging","_prevX","_prevT","_lastDiff","_bounding","_waitTimout","getBoundingClientRect","clear","clearTimeout","mouseDown","_startEvent","clientX","mouseMove","_rotate","mouseUp","_endEvent","touchStart","touches","touchMove","touchEnd","_getCurrentX","Date","now","_throw","currentX","new_t","abs","condition","floor","_wait","absDiff","captures","ease","_easeOutSine","PI","ms","naturalSizes","drag","Zoom","_hasTouch","_touchListeners","_mouseListeners","_pointerZoomEvent","preventDefault","_wheelZoom","onmousedown","button","_mouseDown","onmousemove","_mouseMove","onmouseup","_mouseUp","_touchStart","_touchMove","passive","_touchEnd","pointerStart","pointerEnd","pointerMove","isZooming","changedTouches","_naturalSizes","evCache","prevDiff","prevTouchDiff","defaultOptions","minScale","maxScale","scaleMargins","zoomInterval","setOptions","Object","keys","forEach","opt","initScale","curDiff","zoomIn","pinchCenter","_getPinchCenter","clientY","_pinchZoom","xPoint","yPoint","findIndex","cachedEv","pointerId","x0","x1","y0","y1","diffX","diffY","_removeEvent","splice","setZoom","_canZoom","_limitScale","_setZoomPoints","deltaY","zoomTimeStart","natWidth","_canZoomInPoint","scaleAmount","rayScale","regionsInfo","_canvasGroup","imgW","imgH","level","frame","htDrawCtx","htRefCtx","filtredRegions","_uColorSet","filterOptions","_hsRefTimer","_delayRefDraw","_lastHovered","htDrawcanvas","htEvtCanvas","htEffectCtx","willReadFrequently","htEvtCtx","typesColors","APP_DATA","setupFromXml","hSEvents","Set","ht","name","$","type","polyColor","polyAlpha","polygon","poly","row","state","column","fPos","_formatPositions","vertices","uniqColor","COLOR_HELPER","add","polyObj","colorRef","fillColor","alpha","uKey","_drawHts","_clearCtx","drawHotspots","drawHotspotsRef","region","_getCurrentRegion","values","validate","positions","c","_drawPolygon","fill","ctx","fillStyle","strokeStyle","lineWidth","beginPath","margX","margY","lineTo","closePath","stroke","regionName","infoPoly","surface","filterOpt","filterTypes","types","minSurface","maxSurface","includes","setSurfaceFilter","_updateHotspots","setTypesFilter","pos","reg","polys","split","coor","j","obj","mouseMoveEvent","PointerEvent","_canClick","clickEvent","touchEvent","insideData","_getHotspotData","_regionHoverState","_regionOutState","_regionClickState","touch","timeStart","t","color","mousePos","regionData","_getSelectedHotspot","_setHsEffect","cursor","bounding","pixel","getImageData","data","red","green","blue","cString","Orbital","container","xml","_regionsInfo","animationsPaths","animator","canvasBuilder","XmlManager","loadXmlData","htFromXml","getHotspots","params","levelsCount","animationsCount","lPath","imagesFolder","preloadedFolder","tilesFolder","breakpoints_sizes","breakpoints","breakpoints_folder","maxCache","cropSize","appReady","once","_setConfigStyles","backgroundColor","getPercentLoaded","playOrbital","stopOrbital","next","prev","setLevel","filterHSByPrice","filterHSByTypes","setZoomOptions","getParam","param","getHSParam","getCurrentFrame","unmountOrbital","canvasObj","preloadedBP","preloaded","_currentNaturalWidth","_currentBreakPoint","_currentScale","_cachedFrames","Array","_useCache","_timeOutLoad","_firstFetch","_setLimitCache","breakPoints","entries","sort","a","b","reduce","r","k","v","test","navigator","userAgent","performance","memory","jsHeapSizeLimit","animationIndex","currentWidth","_setCurrentBP","_setCurrentNaturalSize","_loadTiles","find","breakPoint","_loadExistingTiles","breakpoint","folder","_getTilesFolder","_createAndLoadTiles","WSCanvas","tilesInfo","_addToCache","_canLoadImg","cacheInfo","_checkCache","onFinish","natHeight","_calculateWithAspectRatio","partsX","partsY","moduloX","moduloY","lengthX","lengthY","sx","sy","img","decoding","onload","onerror","tilesRegPath","key","bp","keyPath","removed","shift","aspect","regionsStore","useRegionsStore","regions","isError","storeToRefs","infoRef","ref","props","cardInfo","status","value","statut","lastStatus","showLoader","alertMsg","isReqError","alertStyle","computed","sendEdit","editStatus","msg","stat","watch","__exports__","classAlert","reactive","isSuccess","watchEffect","success","caprureStore","useCaptureStore","isLoading","isOpenModal","currentImage","captureLink","errorCapture","fileName","capture","modal","downloadLink","imgName","onMounted","Modal","onUnmounted","dispose","show","download","click","carouselElem","Carousel","defaultImage","defaultBreakPoints","sizes","sizesAttr","srcSets","source","splited","baseString","join","set","getSrcsetPath","smallBp","small","smallPath","smallSet","srcSet","sourceImg","getImagePath","useImage","mainArrow","rotate","deg","gsap","duration","overwrite","expose","appDataStore","useAppDataStore","filterParent","filter","draggableCapture","defaultFilters","surfaceMinMax","checkedTypes","toast","useDraggable","exact","handle","pointerTypes","onMove","elem","elemWidth","offsetWidth","elemHeight","offsetHeight","windowWidth","innerWidth","windowHeight","innerHeight","initToast","Toast","toogleToast","showToast","hide","closeToast","emits","surfaceChanged","sur","typesChanged","_appReady","onClickOutside","removeEventListener","captureStore","currentColor","currentRegion","body__infos","appt","bloc","screenshot","items","url","title","desc","setImageSrc","apptName","nom","onEnter","el","transitionEnter","onLeave","done","transitionLeave","toggle","useFullscreen","colorTypes","default_filters","orbitalParams","firstFetch","detailsComponent","showPopper","popoverPos","orbitalError","orbital","showHsDetails","hsData","stageCount","startingStage","startStage","MenuBtnInterval","compass","northAngle","loadRegionsInfo","fetchRegions","err","addEvents","step","clearInterval","_rotateCompass","setInterval","_setOrbitalAngle","totalFrames","endTimout","showFilter","closeFilter","refresh","onAppReady","onDrag","onUpdateTimeline","onError","onHSClick","setRegion","lastRegionBody","onHSHover","regionBody","onHSOut","clearEvents","bsPlacement","isOpen","activeStageIndex","startingAt","stages","tooltipObj","stageClick","count","stagePrefix","concat","isActive","showBtn","sidebar","showMenu","autoAlpha","closeMenu","onComplete","delay","tooltipTriggerList","querySelectorAll","map","tooltipTriggerEl","Tooltip","trigger","customClass","onBeforeUnmount","tooltip","etage","pInstance","virtualElement","popper","initPopover","generateGetBoundingClientRect","createPopper","placement","modifiers","offset","updatePopover","update","right","bottom","destroy","colorsProps","prefix","typeColor","stage","filteredRegions","countPerFetch","fetchBy","infiniteElem","infinitData","showTrigger","getMore","slice","useIntersectionObserver","isIntersecting","arr","fromEntries","minValue","maxValue","maxSlider","initSliders","fillSlider","controlSlider","isMinSlider","gap","Number","validMax","from","to","rangeDistance","fromPosition","toPosition","sliderColor","rangeColor","background","minSliderInput","debounceMinSlider","maxSliderInput","debounceMaxSlider","debounce","sliderDelay","debounceMin","evt","target","inputsDelay","debounceMax","checkedStages","defaultStages","stageChanged","defaultStatus","currentStatus","statusChanged","defaultTypes"],"sourceRoot":""}